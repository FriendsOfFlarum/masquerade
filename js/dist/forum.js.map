{"version":3,"sources":["webpack://@flagrow/masquerade/webpack/bootstrap","webpack://@flagrow/masquerade/./forum.js","webpack://@flagrow/masquerade/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/masquerade/./src/forum/addProfilePane.js","webpack://@flagrow/masquerade/./src/forum/index.js","webpack://@flagrow/masquerade/./src/forum/mutateUserBio.js","webpack://@flagrow/masquerade/./src/forum/panes/ProfileConfigurePane.js","webpack://@flagrow/masquerade/./src/forum/panes/ProfilePane.js","webpack://@flagrow/masquerade/./src/forum/types/BaseField.js","webpack://@flagrow/masquerade/./src/forum/types/BooleanField.js","webpack://@flagrow/masquerade/./src/forum/types/EmailField.js","webpack://@flagrow/masquerade/./src/forum/types/SelectField.js","webpack://@flagrow/masquerade/./src/forum/types/TypeFactory.js","webpack://@flagrow/masquerade/./src/forum/types/UrlField.js","webpack://@flagrow/masquerade/./src/lib/models/Answer.js","webpack://@flagrow/masquerade/./src/lib/models/Field.js","webpack://@flagrow/masquerade/external \"flarum.core.compat['Model']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['app']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/LinkButton']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/Select']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/UserBio']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/UserPage']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['extend']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['helpers/icon']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['models/User']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['utils/mixin']\""],"names":["app","routes","path","component","ProfilePane","ProfileConfigurePane","extend","UserPage","prototype","items","forum","attribute","user","href","session","route","username","add","LinkButton","children","translator","trans","icon","initializers","store","models","Field","Answer","User","bioFields","Model","hasMany","addProfilePane","mutateUserBio","override","UserBio","view","original","answers","props","m","map","answer","field","type","TypeFactory","typeForField","value","content","answerField","init","loading","loadUser","enforceProfileCompletion","profileCompleted","fields","load","className","onsubmit","update","bind","sort","a","b","hasOwnProperty","id","prop","Button","set","editorField","request","method","url","then","parseResponse","e","preventDefault","data","response","pushPayload","redraw","param","userId","show","BaseField","readAttribute","object","validationRules","split","validationRule","ruleName","ruleContent","forEach","rule","name","required","prefix","editorInput","description","editorInputProps","oninput","withAttr","iconName","answerContent","isNoOptionSelectedValue","BooleanField","options","option","checked","selected","onclick","key","label","push","indexOf","EmailField","placeholder","email","segment","replace","join","mailTo","window","location","NO_OPTION_SELECTED_KEY","Select","onchange","validationIn","identify","types","fieldAttribute","boolean","select","SelectField","UrlField","validation","identified","fieldType","trim","to","popup","open","apiEndpoint","exists","mixin","hasOne","deleted_at","transformDate","on_bio"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\nimport ProfilePane from './panes/ProfilePane';\nimport ProfileConfigurePane from './panes/ProfileConfigurePane';\nimport UserPage from 'flarum/components/UserPage';\nimport LinkButton from 'flarum/components/LinkButton';\n\nexport default function () {\n  app.routes['flagrow-masquerade-view-profile'] = {\n    path: '/masquerade/:username',\n    component: ProfilePane.component()\n  };\n  app.routes['masquerade-configure-profile'] = {\n    path: '/masquerade/configure',\n    component: ProfileConfigurePane.component()\n  };\n\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (app.forum.attribute('canViewMasquerade') || app.forum.attribute('canHaveMasquerade')) {\n      const user = this.user;\n      const href = app.forum.attribute('canHaveMasquerade') && app.session.user === user\n        ? app.route('masquerade-configure-profile')\n        : app.route('flagrow-masquerade-view-profile', { username: user.username() });\n      items.add('masquerade',\n        LinkButton.component({\n          href: href,\n          children: app.translator.trans('flagrow-masquerade.forum.buttons.view-profile'),\n          icon: 'id-card-o'\n        }),\n        200\n      );\n    }\n  });\n}\n","import {extend} from \"flarum/extend\";\nimport app from \"flarum/app\";\nimport User from \"flarum/models/User\";\nimport Field from \"./../lib/models/Field\";\nimport Answer from \"./../lib/models/Answer\";\nimport Model from 'flarum/Model';\n\nimport addProfilePane from './addProfilePane';\nimport mutateUserBio from './mutateUserBio';\n\napp.initializers.add('flagrow-masquerade', app => {\n    app.store.models['masquerade-field'] = Field;\n    app.store.models['masquerade-answer'] = Answer;\n\n    User.prototype.bioFields = Model.hasMany('bioFields');\n\n    addProfilePane();\n\n    mutateUserBio();\n});\n","import {override} from \"flarum/extend\";\nimport UserBio from \"flarum/components/UserBio\";\nimport TypeFactory from './types/TypeFactory';\n\nexport default function () {\n    override(UserBio.prototype, 'view', function (view) {\n        // Load the old user bio.\n        let original = app.forum.attribute('masquerade.disable-user-bio') ? null : view();\n        let answers = app.forum.attribute('canViewMasquerade') ? this.props.user.bioFields() || [] : [];\n\n        return m('.Masquerade-Bio', [\n            original,\n            m('div', answers.map(answer => {\n                const field = answer.attribute('field');\n                const type = TypeFactory.typeForField({\n                    field,\n                    value() {\n                        return answer.content();\n                    },\n                });\n\n                return type.answerField();\n            }))\n        ]);\n    });\n}\n","import UserPage from 'flarum/components/UserPage';\nimport Button from \"flarum/components/Button\";\nimport TypeFactory from './../types/TypeFactory';\n\nexport default class ProfileConfigurePane extends UserPage {\n    init() {\n        super.init();\n        this.loading = true;\n\n        this.loadUser(app.session.user.username());\n        this.enforceProfileCompletion = app.forum.attribute('masquerade.force-profile-completion') || false;\n        this.profileCompleted = app.forum.attribute('masquerade.profile-completed') || false;\n        this.fields = [];\n        this.answers = {};\n        this.load();\n    }\n\n    content() {\n        return m('form', {\n                className: 'ProfileConfigurePane',\n                onsubmit: this.update.bind(this)\n            }, [\n                (this.enforceProfileCompletion && !this.profileCompleted) ?\n                    m('div', {className: 'Alert Alert--Error'}, app.translator.trans('flagrow-masquerade.forum.alerts.profile-completion-required')) :\n                    '',\n                m('div', {className: 'Fields'}, this.fields\n                    .sort((a, b) => a.sort() - b.sort())\n                    .map(field => {\n                        if (!this.answers.hasOwnProperty(field.id())) {\n                            this.answers[field.id()] = field.answer() ? m.prop(field.answer().content()) : m.prop('');\n                        }\n\n                        return this.field(field);\n                    })\n                ),\n                Button.component({\n                    type: 'submit',\n                    className: 'Button Button--primary',\n                    children: app.translator.trans('flagrow-masquerade.forum.buttons.save-profile'),\n                    loading: this.loading\n                })\n            ]\n        );\n    }\n\n    field(field) {\n        const type = TypeFactory.typeForField({\n            field,\n            set: this.set.bind(this, field),\n            value: this.answers[field.id()],\n        });\n\n        return type.editorField();\n    }\n\n    load() {\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/masquerade/configure',\n        }).then(\n            this.parseResponse.bind(this)\n        );\n    }\n\n    set(field, value) {\n        if (this.answers.hasOwnProperty(field.id())) {\n            this.answers[field.id()](value);\n        } else {\n            this.answers[field.id()] = m.prop(value);\n        }\n    }\n\n    update(e) {\n        e.preventDefault();\n\n        this.loading = true;\n        let data = this.answers;\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/masquerade/configure',\n            data\n        }).then(\n            this.parseResponse.bind(this)\n        )\n    }\n\n    parseResponse(response) {\n        this.fields = app.store.pushPayload(response);\n        this.loading = false;\n        m.redraw()\n    }\n}\n","import UserPage from 'flarum/components/UserPage';\nimport TypeFactory from './../types/TypeFactory';\n\nexport default class ProfileConfigurePane extends UserPage {\n    init() {\n        super.init();\n        this.loading = true;\n\n        this.fields = [];\n        this.answers = {};\n\n        this.loadUser(m.route.param('username'));\n    }\n\n    content() {\n        return m('div', {\n                className: 'Masquerade-Bio'\n            }, [\n                m('div', {className: 'Fields'}, this.fields\n                    .sort((a, b) => a.sort() - b.sort())\n                    .map(field => {\n                        this.answers[field.id()] = field.answer() && field.answer().userId() == this.user.id() ? field.answer().content() : null;\n\n                        return this.field(field);\n                    })\n                )\n            ]\n        );\n    }\n\n    field(field) {\n        const type = TypeFactory.typeForField({\n            field,\n            value: m.prop(this.answers[field.id()]),\n        });\n\n        return type.answerField();\n    }\n\n    load(user) {\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/masquerade/profile/' + user.id(),\n        }).then(\n            this.parseResponse.bind(this)\n        );\n    }\n\n    show(user) {\n        this.load(user);\n\n        super.show(user);\n    }\n\n    parseResponse(response) {\n        this.answers = {};\n        this.fields = app.store.pushPayload(response);\n\n        this.loading = false;\n        m.redraw()\n    }\n}\n","import icon from 'flarum/helpers/icon';\n\nexport default class BaseField {\n    constructor({field, set, value}) {\n        this.field = field;\n        this.set = set;\n        this.value = value;\n    }\n\n    readAttribute(object, attribute) {\n        if (typeof object[attribute] === 'function') {\n            return object[attribute]();\n        }\n\n        return object[attribute];\n    }\n\n    /**\n     * Gets all Laravel validation rules split by rule\n     * @returns {Array}\n     */\n    validationRules() {\n        return this.readAttribute(this.field, 'validation').split('|');\n    }\n\n    /**\n     * Gets a Laravel validation rule by name\n     * @param {string} ruleName\n     * @returns {string|null}\n     */\n    validationRule(ruleName) {\n        let ruleContent = null;\n\n        this.validationRules().forEach(rule => {\n            const split = rule.split(':', 2);\n\n            if (split[0] === ruleName) {\n                ruleContent = split[1];\n            }\n        });\n\n        return ruleContent;\n    }\n\n    editorField() {\n        return m('fieldset.Field', [\n            m('legend', [\n                this.field.icon() ? icon(this.field.icon()) : '',\n                this.field.name(),\n                this.field.required() ? ' *' : '',\n            ]),\n            m('.FormField', [\n                this.field.prefix() ? m('.prefix', this.field.prefix()) : '',\n                this.editorInput(),\n                this.field.description() ? m('.helpText', this.field.description()) : '',\n            ]),\n        ]);\n    }\n\n    editorInput() {\n        return m('input', this.editorInputProps());\n    }\n\n    editorInputProps() {\n        return {\n            className: 'FormControl',\n            oninput: m.withAttr('value', this.set),\n            value: this.value(),\n            required: this.field.required(),\n        };\n    }\n\n    answerField() {\n        const iconName = this.readAttribute(this.field, 'icon');\n\n        return m('.Masquerade-Bio-Set', [\n            m('span.Masquerade-Bio-Field', [\n                iconName ? icon(iconName) : '',\n                this.readAttribute(this.field, 'name') + ':',\n            ]),\n            m('span.Masquerade-Bio-Answer', this.answerContent()),\n        ]);\n    }\n\n    answerContent() {\n        return this.value();\n    }\n\n    static isNoOptionSelectedValue(value) {\n        // The value can be null when coming from the API\n        // The value can be '' when the field does not exist on the user (the empty string is set in ProfileConfigurePane)\n        return value === null || value === '';\n    }\n}\n","import icon from 'flarum/helpers/icon';\nimport BaseField from './BaseField';\n\nexport default class BooleanField extends BaseField {\n    editorInput() {\n        return this.options().map(option => m('div', m('label', [\n            m('input[type=radio]', {\n                checked: option.selected(this.value()),\n                onclick: () => {\n                    this.set(option.key);\n                },\n            }),\n            ' ' + option.label,\n        ])));\n    }\n\n    options() {\n        let options = [];\n\n        if (!this.readAttribute(this.field, 'required')) {\n            options.push({\n                selected: value => BaseField.isNoOptionSelectedValue(value),\n                key: null,\n                label: app.translator.trans('flagrow-masquerade.forum.fields.select.none-optional'),\n            });\n        }\n\n        options.push({\n            selected: value => ['true', '1', 1, true, 'yes'].indexOf(value) !== -1,\n            key: 'true',\n            label: app.translator.trans('flagrow-masquerade.forum.fields.boolean.yes'),\n        });\n\n        options.push({\n            selected: value => ['false', '0', 0, false, 'no'].indexOf(value) !== -1,\n            key: 'false',\n            label: app.translator.trans('flagrow-masquerade.forum.fields.boolean.no'),\n        });\n\n        // This is probably overkill because it looks like the backend casts the value anyway\n        if (!BaseField.isNoOptionSelectedValue(this.value()) && ['true', '1', 1, true, 'yes', 'false', '0', 0, false, 'no'].indexOf(this.value()) === -1) {\n            options.push({\n                selected: () => true,\n                key: this.value(),\n                label: '(invalid) ' + this.value(),\n            });\n        }\n\n        return options;\n    }\n\n    answerContent() {\n        if (BaseField.isNoOptionSelectedValue(this.value())) {\n            return '';\n        }\n\n        return [1, '1', true, 'true', 'yes'].indexOf(this.value()) !== -1 ?\n            [icon('check-square-o'), ' ', app.translator.trans('flagrow-masquerade.forum.fields.boolean.yes')] :\n            [icon('square-o'), ' ', app.translator.trans('flagrow-masquerade.forum.fields.boolean.no')];\n    }\n}\n","import Button from 'flarum/components/Button';\nimport BaseField from './BaseField';\n\nexport default class EmailField extends BaseField {\n    editorInputProps() {\n        let props = super.editorInputProps();\n\n        props.type = 'email';\n        props.placeholder = 'you@example.com';\n\n        return props;\n    }\n\n    answerContent() {\n        const email = this.value()\n            .split(/@|\\./)\n            .map(segment => {\n                return segment.replace(/(.{2})./g, '$1*');\n            })\n            .join('*');\n\n        return Button.component({\n            onclick: () => this.mailTo(),\n            className: 'Button Button--text',\n            icon: 'envelope-o',\n            children: email,\n        });\n    }\n\n    mailTo() {\n        window.location = 'mailto:' + this.value();\n    }\n}\n","import Select from 'flarum/components/Select';\nimport BaseField from './BaseField';\n\nconst NO_OPTION_SELECTED_KEY = 'flagrow_masquerade_no_option_selected';\n\nexport default class EmailField extends BaseField {\n    editorInput() {\n        return Select.component({\n            onchange: value => {\n                if (value === NO_OPTION_SELECTED_KEY) {\n                    value = null;\n                }\n\n                this.set(value);\n            },\n            value: BaseField.isNoOptionSelectedValue(this.value()) ? NO_OPTION_SELECTED_KEY : this.value(),\n            options: this.options(),\n        });\n    }\n\n    options() {\n        let options = {};\n\n        if (!this.readAttribute(this.field, 'required')) {\n            options[NO_OPTION_SELECTED_KEY] = app.translator.trans('flagrow-masquerade.forum.fields.select.none-optional');\n        } else if (BaseField.isNoOptionSelectedValue(this.value())) {\n            options[NO_OPTION_SELECTED_KEY] = app.translator.trans('flagrow-masquerade.forum.fields.select.none-required');\n        }\n\n        const validationIn = this.validationRule('in');\n\n        if (validationIn) {\n            validationIn.split(',').forEach(value => {\n                options[value] = value;\n            });\n        }\n\n        if (!BaseField.isNoOptionSelectedValue(this.value()) && typeof options[this.value()] === 'undefined') {\n            options[this.value()] = '(invalid) ' + this.value();\n        }\n\n        return options;\n    }\n}\n","import BaseField from './BaseField';\nimport BooleanField from './BooleanField';\nimport EmailField from './EmailField';\nimport SelectField from './SelectField';\nimport UrlField from './UrlField';\n\nexport default class TypeFactory {\n    static typeForField({field, set, value}) {\n        let className = BaseField;\n\n        const type = this.identify(field);\n\n        if (type) {\n            className = this.types()[type];\n        }\n\n        return new className({\n            field,\n            set,\n            value,\n        });\n    }\n\n    static fieldAttribute(field, attribute) {\n        if (typeof field[attribute] === 'function') {\n            return field[attribute]();\n        }\n\n        return field[attribute];\n    }\n\n    static types() {\n        return {\n            boolean: BooleanField,\n            email: EmailField,\n            select: SelectField,\n            url: UrlField,\n        };\n    }\n\n    /**\n     * Identifies how to parse the field answer.\n     * @returns {null|string}\n     */\n    static identify(field) {\n        const validation = this.fieldAttribute(field, 'validation').split(',');\n        let identified = null;\n\n        // If the field has a type we use it\n        const fieldType = this.fieldAttribute(field, 'type');\n        if (typeof this.types()[fieldType] !== 'undefined') {\n            return fieldType;\n        }\n\n        // If it's an advanced field with no type we then guess the best type\n        validation.forEach(rule => {\n            rule = rule.trim();\n\n            if (typeof this.types()[rule] !== 'undefined') {\n                identified = rule;\n            }\n        });\n\n        return identified;\n    }\n}\n","import Button from 'flarum/components/Button';\nimport BaseField from './BaseField';\n\nexport default class UrlField extends BaseField {\n    editorInputProps() {\n        let props = super.editorInputProps();\n\n        props.type = 'url';\n        props.placeholder = 'https://example.com';\n\n        return props;\n    }\n\n    answerContent() {\n        return Button.component({\n            onclick: () => this.to(),\n            className: 'Button Button--text',\n            icon: 'link',\n            children: this.value().replace(/^https?:\\/\\//, ''),\n        });\n    }\n\n    to() {\n        const popup = window.open();\n        popup.location = this.value();\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Answer extends mixin(Model, {\n    content: Model.attribute('content'),\n    field: Model.hasOne('field'),\n    userId: Model.attribute('user_id')\n}) {\n    /**\n     * Construct a path to the API endpoint for this resource.\n     *\n     * @return {String}\n     * @protected\n     */\n    apiEndpoint() {\n        return '/masquerade/configure' + (this.exists ? '/' + this.data.id : '');\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Field extends mixin(Model, {\n    name: Model.attribute('name'),\n    description: Model.attribute('description'),\n    type: Model.attribute('type'),\n    validation: Model.attribute('validation'),\n    required: Model.attribute('required'),\n    prefix: Model.attribute('prefix'),\n    icon: Model.attribute('icon'),\n    sort: Model.attribute('sort'),\n    deleted_at: Model.attribute('deleted_at', Model.transformDate),\n    answer: Model.hasOne('answer'),\n    on_bio: Model.attribute('on_bio')\n}) {\n    /**\n     * Construct a path to the API endpoint for this resource.\n     *\n     * @return {String}\n     * @protected\n     */\n    apiEndpoint() {\n        return '/masquerade/fields' + (this.exists ? '/' + this.data.id : '');\n    }\n}\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/UserBio'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}