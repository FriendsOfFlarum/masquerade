{"version":3,"sources":["webpack://@flagrow/masquerade/webpack/bootstrap","webpack://@flagrow/masquerade/./admin.js","webpack://@flagrow/masquerade/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/masquerade/./src/admin/addProfileConfigurePane.js","webpack://@flagrow/masquerade/./src/admin/components/SelectFieldOptionEditor.js","webpack://@flagrow/masquerade/./src/admin/index.js","webpack://@flagrow/masquerade/./src/admin/panes/ProfileConfigurePane.js","webpack://@flagrow/masquerade/./src/lib/models/Field.js","webpack://@flagrow/masquerade/external \"flarum.core.compat['Component']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['Model']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['app']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/AdminNav']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/PermissionGrid']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/Select']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['components/Switch']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['extend']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['helpers/icon']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['utils/mixin']\"","webpack://@flagrow/masquerade/external \"flarum.core.compat['utils/saveSettings']\""],"names":["app","routes","path","component","ProfileConfigurePane","extensionSettings","m","route","extend","AdminNav","prototype","items","add","AdminLinkButton","href","icon","children","description","translator","trans","SelectFieldOptionEditor","init","newOption","prop","view","options","map","option","optionIndex","oninput","withAttr","value","updateOption","onclick","moveOption","deleteOption","onchange","placeholder","addOption","updateRules","props","join","rules","split","forEach","rule","parts","index","moveIndex","newIndex","length","move","splice","push","Component","initializers","store","models","Field","PermissionGrid","label","permission","allowGuest","addProfileConfigurePane","resetNew","loading","existing","loadExisting","enforceProfileCompletion","data","settings","disableUserBio","config","$","sortable","cancel","on","e","ui","sorting","get","updateSort","fields","sort","a","b","field","addField","className","Switch","state","updateSetting","bind","onsubmit","submitAddField","new","setting","saveSettings","exists","id","Button","deleteField","toggleField","name","updateExistingFieldInput","on_bio","required","Select","availableTypes","type","validation","disabled","readyToAdd","updateExistingField","what","pushAttributes","request","method","url","forum","attribute","target","parents","toggleClass","then","requestSuccess","preventDefault","redraw","result","model","pushPayload","Array","deleted_at","remove","all","email","boolean","select","null","apiEndpoint","mixin","Model","prefix","transformDate","answer","hasOne"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA,wC;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEe,2EAAY;AACvB;AACAA,KAAG,CAACC,MAAJ,CAAW,sCAAX,IAAqD;AAACC,QAAI,EAAE,+BAAP;AAAwCC,aAAS,EAAEC,mEAAoB,CAACD,SAArB;AAAnD,GAArD,CAFuB,CAIvB;;AACAH,KAAG,CAACK,iBAAJ,CAAsB,oBAAtB,IAA8C;AAAA,WAAMC,CAAC,CAACC,KAAF,CAAQP,GAAG,CAACO,KAAJ,CAAU,sCAAV,CAAR,CAAN;AAAA,GAA9C;;AAEAC,8DAAM,CAACC,iEAAQ,CAACC,SAAV,EAAqB,OAArB,EAA8B,UAAAC,KAAK,EAAI;AACzC;AACAA,SAAK,CAACC,GAAN,CAAU,sCAAV,EAAkDC,wEAAe,CAACV,SAAhB,CAA0B;AACxEW,UAAI,EAAEd,GAAG,CAACO,KAAJ,CAAU,sCAAV,CADkE;AAExEQ,UAAI,EAAE,WAFkE;AAGxEC,cAAQ,EAAE,YAH8D;AAIxEC,iBAAW,EAAEjB,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,2CAArB;AAJ2D,KAA1B,CAAlD;AAMH,GARK,CAAN;AASH,C;;;;;;;;;;;;;;;;;;;;;;ACrBD;AACA;AACA;;IAEqBC,uB;;;;;;;;;;;SACjBC,I,mBAAO;AACH,SAAKC,SAAL,GAAiBhB,CAAC,CAACiB,IAAF,CAAO,EAAP,CAAjB;AACH,G;;SAEDC,I,mBAAO;AAAA;;AACH,WAAOlB,CAAC,CAAC,IAAD,EAAO,CACXA,CAAC,CAAC,OAAD,EAAUN,iDAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,yCAArB,CAAV,CADU,EAEXb,CAAC,CAAC,OAAD,EAAUA,CAAC,CAAC,OAAD,EAAU,KAAKmB,OAAL,GAAeC,GAAf,CAAmB,UAACC,MAAD,EAASC,WAAT;AAAA,aAAyBtB,CAAC,CAAC,IAAD,EAAO,CACtEA,CAAC,CAAC,IAAD,EAAOA,CAAC,CAAC,8BAAD,EAAiC;AACtCuB,eAAO,EAAEvB,CAAC,CAACwB,QAAF,CAAW,OAAX,EAAoB,UAAAC,KAAK,EAAI;AAClC,eAAI,CAACC,YAAL,CAAkBJ,WAAlB,EAA+BG,KAA/B;AACH,SAFQ,CAD6B;AAItCA,aAAK,EAAEJ;AAJ+B,OAAjC,CAAR,CADqE,EAOtErB,CAAC,CAAC,IAAD,EAAOA,CAAC,CAAC,eAAD,EAAkB;AACvB2B,eAAO,EAAE,mBAAM;AACX,eAAI,CAACC,UAAL,CAAgBN,WAAhB,EAA6B,CAAC,CAA9B;AACH;AAHsB,OAAlB,EAINb,0DAAI,CAAC,YAAD,CAJE,CAAR,CAPqE,EAYtET,CAAC,CAAC,IAAD,EAAOA,CAAC,CAAC,eAAD,EAAkB;AACvB2B,eAAO,EAAE,mBAAM;AACX,eAAI,CAACC,UAAL,CAAgBN,WAAhB,EAA6B,CAA7B;AACH;AAHsB,OAAlB,EAINb,0DAAI,CAAC,cAAD,CAJE,CAAR,CAZqE,EAiBtET,CAAC,CAAC,IAAD,EAAOA,CAAC,CAAC,8BAAD,EAAiC;AACtC2B,eAAO,EAAE,mBAAM;AACX,eAAI,CAACE,YAAL,CAAkBP,WAAlB;AACH;AAHqC,OAAjC,EAINb,0DAAI,CAAC,OAAD,CAJE,CAAR,CAjBqE,CAAP,CAA1B;AAAA,KAAnB,CAAV,CAAX,CAFU,EAyBXT,CAAC,CAAC,WAAD,EAAcN,iDAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,qDAArB,CAAd,CAzBU,EA0BXb,CAAC,CAAC,OAAD,EAAUA,CAAC,CAAC,OAAD,CAAX,EAAsBA,CAAC,CAAC,IAAD,EAAO,CAC3BA,CAAC,CAAC,IAAD,EAAOA,CAAC,CAAC,8BAAD,EAAiC;AACtC8B,cAAQ,EAAE9B,CAAC,CAACwB,QAAF,CAAW,OAAX,EAAoB,KAAKR,SAAzB,CAD4B;AAEtCS,WAAK,EAAE,KAAKT,SAAL,EAF+B;AAGtCe,iBAAW,EAAErC,iDAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB;AAHyB,KAAjC,CAAR,CAD0B,EAM3Bb,CAAC,CAAC,IAAD,EAAOA,CAAC,CAAC,+BAAD,EAAkC;AACvC2B,aAAO,EAAE,mBAAM;AACX,aAAI,CAACK,SAAL;AACH;AAHsC,KAAlC,EAINvB,0DAAI,CAAC,MAAD,CAJE,CAAR,CAN0B,CAAP,CAAvB,CA1BU,CAAP,CAAR;AAuCH,G;;SAEDwB,W,wBAAYd,O,EAAS;AACjB;AACA,SAAKe,KAAL,CAAWJ,QAAX,CAAoB,QAAQX,OAAO,CAACgB,IAAR,CAAa,GAAb,CAA5B;AACH,G;;SAEDhB,O,sBAAU;AACN,QAAMiB,KAAK,GAAG,KAAKF,KAAL,CAAWT,KAAX,CAAiBY,KAAjB,CAAuB,GAAvB,CAAd;AAEA,QAAIlB,OAAO,GAAG,EAAd;AAEAiB,SAAK,CAACE,OAAN,CAAc,UAAAC,IAAI,EAAI;AAClB,UAAMC,KAAK,GAAGD,IAAI,CAACF,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAd;;AAEA,UAAIG,KAAK,CAAC,CAAD,CAAL,KAAa,IAAjB,EAAuB;AACnBrB,eAAO,GAAGqB,KAAK,CAAC,CAAD,CAAL,CAASH,KAAT,CAAe,GAAf,CAAV;AACH;AACJ,KAND;AAQA,WAAOlB,OAAP;AACH,G;;SAEDO,Y,yBAAae,K,EAAOhB,K,EAAO;AACvB,QAAIN,OAAO,GAAG,KAAKA,OAAL,EAAd;AAEAA,WAAO,CAACsB,KAAD,CAAP,GAAiBhB,KAAjB;AAEA,SAAKQ,WAAL,CAAiBd,OAAjB;AACH,G;;SAEDS,U,uBAAWa,K,EAAOC,S,EAAW;AACzB,QAAIvB,OAAO,GAAG,KAAKA,OAAL,EAAd;AAEA,QAAMwB,QAAQ,GAAGF,KAAK,GAAGC,SAAzB;;AAEA,QAAIC,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,GAAGxB,OAAO,CAACyB,MAAR,GAAiB,CAAhD,EAAmD;AAC/C;AACH;;AAED,QAAMC,IAAI,GAAG1B,OAAO,CAAC2B,MAAR,CAAeL,KAAf,EAAsB,CAAtB,CAAb;AAEAtB,WAAO,CAAC2B,MAAR,CAAeH,QAAf,EAAyB,CAAzB,EAA4BE,IAAI,CAAC,CAAD,CAAhC;AAEA,SAAKZ,WAAL,CAAiBd,OAAjB;AACH,G;;SAEDU,Y,yBAAaY,K,EAAO;AAChB,QAAItB,OAAO,GAAG,KAAKA,OAAL,EAAd;AAEAA,WAAO,CAAC2B,MAAR,CAAeL,KAAf,EAAsB,CAAtB;AAEA,SAAKR,WAAL,CAAiBd,OAAjB;AACH,G;;SAEDa,S,wBAAY;AACR,QAAI,KAAKhB,SAAL,OAAqB,EAAzB,EAA6B;AACzB;AACH;;AAED,QAAIG,OAAO,GAAG,KAAKA,OAAL,EAAd;AAEAA,WAAO,CAAC4B,IAAR,CAAa,KAAK/B,SAAL,EAAb;AAEA,SAAKA,SAAL,CAAe,EAAf;AAEA,SAAKiB,WAAL,CAAiBd,OAAjB;AACH,G;;;EAhHgD6B,uD;;;;;;;;;;;;;;ACJrD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEAtD,iDAAG,CAACuD,YAAJ,CAAiB3C,GAAjB,CAAqB,oBAArB,EAA2C,UAAAZ,GAAG,EAAI;AAC9CA,KAAG,CAACwD,KAAJ,CAAUC,MAAV,CAAiB,kBAAjB,IAAuCC,yDAAvC,CAD8C,CAG9C;;AACAlD,8DAAM,CAACmD,uEAAc,CAACjD,SAAhB,EAA2B,WAA3B,EAAwC,UAAAC,KAAK,EAAI;AACnDA,SAAK,CAACC,GAAN,CAAU,yBAAV,EAAqC;AACjCG,UAAI,EAAE,WAD2B;AAEjC6C,WAAK,EAAE5D,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,mDAArB,CAF0B;AAGjC0C,gBAAU,EAAE,iCAHqB;AAIjCC,gBAAU,EAAE;AAJqB,KAArC;AAMH,GAPK,CAAN,CAJ8C,CAY9C;;AACAtD,8DAAM,CAACmD,uEAAc,CAACjD,SAAhB,EAA2B,YAA3B,EAAyC,UAAAC,KAAK,EAAI;AACpDA,SAAK,CAACC,GAAN,CAAU,yBAAV,EAAqC;AACjCG,UAAI,EAAE,WAD2B;AAEjC6C,WAAK,EAAE5D,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,mDAArB,CAF0B;AAGjC0C,gBAAU,EAAE;AAHqB,KAArC;AAKH,GANK,CAAN;AAQAE,0EAAuB;AAC1B,CAtBD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;IAEqB3D,oB;;;;;;;;;;;AAEjB;;;SAGAiB,I,mBAAO;AACH,SAAK2C,QAAL;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,YAAL;AACA,SAAKC,wBAAL,GAAgC9D,CAAC,CAACiB,IAAF,CAAOvB,GAAG,CAACqE,IAAJ,CAASC,QAAT,CAAkB,qCAAlB,KAA4D,CAAnE,CAAhC;AACA,SAAKC,cAAL,GAAsBjE,CAAC,CAACiB,IAAF,CAAOvB,GAAG,CAACqE,IAAJ,CAASC,QAAT,CAAkB,6BAAlB,KAAoD,CAA3D,CAAtB;AACH,G;AAED;;;;;SAGAE,M,qBAAS;AAAA;;AACL,SAAKC,CAAL,CAAO,mBAAP,EACKC,QADL,CACc;AACNC,YAAM,EAAE;AADF,KADd,EAIKC,EAJL,CAIQ,YAJR,EAIsB,UAACC,CAAD,EAAIC,EAAJ,EAAW;AACzB,UAAMC,OAAO,GAAG,KAAI,CAACN,CAAL,CAAO,4BAAP,EACX/C,GADW,CACP,YAAY;AACb,eAAO+C,CAAC,CAAC,IAAD,CAAD,CAAQJ,IAAR,CAAa,IAAb,CAAP;AACH,OAHW,EAIXW,GAJW,EAAhB;;AAMA,WAAI,CAACC,UAAL,CAAgBF,OAAhB;AACH,KAZL;AAaH,G;AAED;;;;;;;SAKAvD,I,mBAAO;AAAA;;AACH,QAAI0D,MAAM,GAAG,EAAb;AAEA,SAAKhB,QAAL,CACKiB,IADL,CACU,UAACC,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,CAACD,IAAF,KAAWE,CAAC,CAACF,IAAF,EAArB;AAAA,KADV,EAEKvC,OAFL,CAEa,UAAA0C,KAAK,EAAI;AACd;AACAJ,YAAM,CAAC7B,IAAP,CAAY,MAAI,CAACkC,QAAL,CAAcD,KAAd,CAAZ;AACH,KALL;AAOA,WAAOhF,CAAC,CAAC,KAAD,EAAQ;AACZkF,eAAS,EAAE;AADC,KAAR,EAEL,CACClF,CAAC,CAAC,KAAD,EAAQ;AAACkF,eAAS,EAAE;AAAZ,KAAR,EAAkC,CAC/BlF,CAAC,CAAC,MAAD,EAAS;AACNkF,eAAS,EAAE;AADL,KAAT,EAEE,CACClF,CAAC,CAAC,OAAD,EAAU,EAAV,CADF,EACiB,CACZmF,+DAAM,CAACtF,SAAP,CAAiB;AACbuF,WAAK,EAAE,KAAKtB,wBAAL,EADM;AAEbhC,cAAQ,EAAE,KAAKuD,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,EAA8B,KAAKxB,wBAAnC,EAA6D,qCAA7D,CAFG;AAGbpD,cAAQ,EAAEhB,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,0DAArB;AAHG,KAAjB,CADY,EAMZb,CAAC,CAAC,IAAD,CANW,CADjB,EASCA,CAAC,CAAC,OAAD,EAAU,EAAV,CATF,EASiB,CACZmF,+DAAM,CAACtF,SAAP,CAAiB;AACbuF,WAAK,EAAE,KAAKnB,cAAL,EADM;AAEbnC,cAAQ,EAAE,KAAKuD,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,EAA8B,KAAKrB,cAAnC,EAAmD,6BAAnD,CAFG;AAGbvD,cAAQ,EAAEhB,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,kDAArB;AAHG,KAAjB,CADY,EAMZb,CAAC,CAAC,IAAD,CANW,CATjB,CAFF,CAD8B,EAqB/BA,CAAC,CAAC,MAAD,EAAS;AACFkF,eAAS,EAAE;AADT,KAAT,EAGGN,MAHH,CArB8B,EA0B/B5E,CAAC,CAAC,MAAD,EAAS;AAACuF,cAAQ,EAAE,KAAKC,cAAL,CAAoBF,IAApB,CAAyB,IAAzB;AAAX,KAAT,EAAqD,CAClD,KAAKL,QAAL,CAAc,KAAKQ,GAAnB,CADkD,CAArD,CA1B8B,CAAlC,CADF,CAFK,CAAR;AAkCH,G;AAED;;;;;;;;SAMAJ,a,0BAAcpE,I,EAAMyE,O,EAASjE,K,EAC7B;AAAA;;AACIkE,oEAAY,oCACPD,OADO,IACGjE,KADH,iBAAZ;AAIAR,QAAI,CAACQ,KAAD,CAAJ;AACH,G;AAED;;;;;;;;SAMAwD,Q,qBAASD,K,EAAO;AAAA;;AACZ,QAAIY,MAAM,GAAGZ,KAAK,CAACa,EAAN,EAAb;AAEA,WAAO7F,CAAC,CAAC,UAAD,EAAa;AACjBkF,eAAS,EAAE,OADM;AAEjB,iBAAWF,KAAK,CAACa,EAAN;AAFM,KAAb,EAGL,CACC7F,CAAC,CAAC,QAAD,EAAW,CACR4F,MAAM,GAAG5F,CAAC,CAAC,KAAD,EAAQ;AAACkF,eAAS,EAAE;AAAZ,KAAR,EAA+C,CACrDY,+DAAM,CAACjG,SAAP,CAAiB;AACbqF,eAAS,EAAE,oCADE;AAEbzE,UAAI,EAAE,OAFO;AAGbkB,aAAO,EAAE,KAAKoE,WAAL,CAAiBT,IAAjB,CAAsB,IAAtB,EAA4BN,KAA5B;AAHI,KAAjB,CADqD,CAA/C,CAAJ,GAMD,IAPG,EAQRhF,CAAC,CACG,MADH,EACW;AACJkF,eAAS,EAAE,OADP;AAEJvD,aAAO,EAAE,iBAAC4C,CAAD;AAAA,eAAO,MAAI,CAACyB,WAAL,CAAiBzB,CAAjB,CAAP;AAAA;AAFL,KADX,EAKG7E,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,sCAAsC+E,MAAM,GAAG,MAAH,GAAY,KAAxD,CAArB,EAAqF;AACjFZ,WAAK,EAAEA,KAAK,CAACiB,IAAN;AAD0E,KAArF,CALH,CARO,CAAX,CADF,EAmBCjG,CAAC,CAAC,IAAD,EAAO,CACJA,CAAC,CAAC,IAAD,EAAO,CACJA,CAAC,CAAC,OAAD,EAAUN,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,sCAArB,CAAV,CADG,EAEJb,CAAC,CAAC,OAAD,EAAU;AACPkF,eAAS,EAAE,aADJ;AAEPzD,WAAK,EAAEuD,KAAK,CAACiB,IAAN,EAFA;AAGP1E,aAAO,EAAEvB,CAAC,CAACwB,QAAF,CAAW,OAAX,EAAoB,KAAK0E,wBAAL,CAA8BZ,IAA9B,CAAmC,IAAnC,EAAyC,MAAzC,EAAiDN,KAAjD,CAApB;AAHF,KAAV,CAFG,EAOJhF,CAAC,CAAC,MAAD,EAAS;AAACkF,eAAS,EAAE;AAAZ,KAAT,EAAkCxF,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,2CAArB,CAAlC,CAPG,CAAP,CADG,EAUJb,CAAC,CAAC,IAAD,EAAO,CACJA,CAAC,CAAC,OAAD,EAAUN,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,6CAArB,CAAV,CADG,EAEJb,CAAC,CAAC,OAAD,EAAU;AACPkF,eAAS,EAAE,aADJ;AAEPzD,WAAK,EAAEuD,KAAK,CAACrE,WAAN,EAFA;AAGPY,aAAO,EAAEvB,CAAC,CAACwB,QAAF,CAAW,OAAX,EAAoB,KAAK0E,wBAAL,CAA8BZ,IAA9B,CAAmC,IAAnC,EAAyC,aAAzC,EAAwDN,KAAxD,CAApB;AAHF,KAAV,CAFG,EAOJhF,CAAC,CAAC,MAAD,EAAS;AAACkF,eAAS,EAAE;AAAZ,KAAT,EAAkCxF,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,kDAArB,CAAlC,CAPG,CAAP,CAVG,EAmBJb,CAAC,CAAC,IAAD,EAAO,CACJA,CAAC,CAAC,OAAD,EAAUN,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,sCAArB,CAAV,CADG,EAEJb,CAAC,CAAC,OAAD,EAAU;AACPkF,eAAS,EAAE,aADJ;AAEPzD,WAAK,EAAEuD,KAAK,CAACvE,IAAN,EAFA;AAGPc,aAAO,EAAEvB,CAAC,CAACwB,QAAF,CAAW,OAAX,EAAoB,KAAK0E,wBAAL,CAA8BZ,IAA9B,CAAmC,IAAnC,EAAyC,MAAzC,EAAiDN,KAAjD,CAApB;AAHF,KAAV,CAFG,EAOJhF,CAAC,CAAC,MAAD,EAAS;AAACkF,eAAS,EAAE;AAAZ,KAAT,EAAkCxF,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,2CAArB,EAAkE;AACjGiE,OAAC,EAAE;AAAG,YAAI,EAAC,8BAAR;AAAuC,cAAM,EAAC;AAA9C;AAD8F,KAAlE,CAAlC,CAPG,CAAP,CAnBG,EA8BJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA9E,KAAC,CAAC,IAAD,EAAO,CACJA,CAAC,CAAC,OAAD,EAAU,EAAV,CADG,EACY,CACZmF,+DAAM,CAACtF,SAAP,CAAiB;AACbuF,WAAK,EAAEJ,KAAK,CAACmB,MAAN,EADM;AAEbrE,cAAQ,EAAE,KAAKoE,wBAAL,CAA8BZ,IAA9B,CAAmC,IAAnC,EAAyC,QAAzC,EAAmDN,KAAnD,CAFG;AAGbtE,cAAQ,EAAEhB,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,wCAArB;AAHG,KAAjB,CADY,EAMZb,CAAC,CAAC,IAAD,CANW,CADZ,CAAP,CAxCG,EAkDJA,CAAC,CAAC,IAAD,EAAO,CACJA,CAAC,CAAC,OAAD,EAAU,EAAV,CADG,EACY,CACZmF,+DAAM,CAACtF,SAAP,CAAiB;AACbuF,WAAK,EAAEJ,KAAK,CAACoB,QAAN,EADM;AAEbtE,cAAQ,EAAE,KAAKoE,wBAAL,CAA8BZ,IAA9B,CAAmC,IAAnC,EAAyC,UAAzC,EAAqDN,KAArD,CAFG;AAGbtE,cAAQ,EAAEhB,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,0CAArB;AAHG,KAAjB,CADY,EAMZb,CAAC,CAAC,IAAD,CANW,CADZ,CAAP,CAlDG,EA4DJA,CAAC,CAAC,IAAD,EAAO,CACJA,CAAC,CAAC,OAAD,EAAUN,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,sCAArB,CAAV,CADG,EAEJwF,+DAAM,CAACxG,SAAP,CAAiB;AACbiC,cAAQ,EAAE,kBAAAL,KAAK,EAAI;AACf,YAAIA,KAAK,KAAK,MAAd,EAAsB;AAClBA,eAAK,GAAG,IAAR;AACH;;AAED,cAAI,CAACyE,wBAAL,CAA8B,MAA9B,EAAsClB,KAAtC,EAA6CvD,KAA7C;AACH,OAPY;AAQbN,aAAO,EAAE,KAAKmF,cAAL,EARI;AASb7E,WAAK,EAAEuD,KAAK,CAACuB,IAAN;AATM,KAAjB,CAFI,CAAP,CA5DG,EA0EHvB,KAAK,CAACuB,IAAN,OAAiB,QAAjB,GAA4BzF,2EAAuB,CAACjB,SAAxB,CAAkC;AAC3DiC,cAAQ,EAAE,kBAAAL,KAAK,EAAI;AACf,cAAI,CAACyE,wBAAL,CAA8B,YAA9B,EAA4ClB,KAA5C,EAAmDvD,KAAnD;AACH,OAH0D;AAI3DA,WAAK,EAAEuD,KAAK,CAACwB,UAAN;AAJoD,KAAlC,CAA5B,GAKI,IA/ED,EAgFHxB,KAAK,CAACuB,IAAN,OAAiB,IAAjB,GAAwBvG,CAAC,CAAC,IAAD,EAAO,CAC7BA,CAAC,CAAC,OAAD,EAAUN,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,4CAArB,CAAV,CAD4B,EAE7Bb,CAAC,CAAC,OAAD,EAAU;AACPkF,eAAS,EAAE,aADJ;AAEPzD,WAAK,EAAEuD,KAAK,CAACwB,UAAN,EAFA;AAGPjF,aAAO,EAAEvB,CAAC,CAACwB,QAAF,CAAW,OAAX,EAAoB,KAAK0E,wBAAL,CAA8BZ,IAA9B,CAAmC,IAAnC,EAAyC,YAAzC,EAAuDN,KAAvD,CAApB;AAHF,KAAV,CAF4B,EAO7BhF,CAAC,CAAC,MAAD,EAAS;AAACkF,eAAS,EAAE;AAAZ,KAAT,EAAkCxF,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,iDAArB,EAAwE;AACvGiE,OAAC,EAAE;AAAG,YAAI,EAAC,oEAAR;AACG,cAAM,EAAC;AADV;AADoG,KAAxE,CAAlC,CAP4B,CAAP,CAAzB,GAWI,IA3FD,EA4FJ9E,CAAC,CAAC,IAAD,EAAO;AAACkF,eAAS,EAAE;AAAZ,KAAP,EAAmC,CAChCY,+DAAM,CAACjG,SAAP,CAAiB;AACb0G,UAAI,EAAE,QADO;AAEbrB,eAAS,EAAE,wBAFE;AAGbxE,cAAQ,EAAEhB,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,uCAAuC+E,MAAM,GAAG,MAAH,GAAY,KAAzD,IAAkE,QAAvF,CAHG;AAIbjC,aAAO,EAAE,KAAKA,OAJD;AAKb8C,cAAQ,EAAE,CAAC,KAAKC,UAAL,CAAgB1B,KAAhB,CALE;AAMbrD,aAAO,EAAE,KAAKgF,mBAAL,CAAyBrB,IAAzB,CAA8B,IAA9B,EAAoCN,KAApC;AANI,KAAjB,CADgC,EAS/BY,MAAM,GAAGE,+DAAM,CAACjG,SAAP,CAAiB;AACvB0G,UAAI,EAAE,QADiB;AAEvBrB,eAAS,EAAE,uBAFY;AAGvBxE,cAAQ,EAAEhB,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,+CAArB,CAHa;AAIvB8C,aAAO,EAAE,KAAKA,OAJS;AAKvBhC,aAAO,EAAE,KAAKoE,WAAL,CAAiBT,IAAjB,CAAsB,IAAtB,EAA4BN,KAA5B;AALc,KAAjB,CAAH,GAMF,EAf2B,CAAnC,CA5FG,CAAP,CAnBF,CAHK,CAAR;AAqIH,G;;SAEDkB,wB,qCAAyBU,I,EAAM5B,K,EAAOvD,K,EAAO;AACzC,QAAImE,MAAM,GAAGZ,KAAK,CAACa,EAAN,EAAb;;AAEA,QAAID,MAAJ,EAAY;AAAA;;AACRZ,WAAK,CAAC6B,cAAN,oDACKD,IADL,IACYnF,KADZ;AAGH,KAJD,MAIO;AACHuD,WAAK,CAAC4B,IAAD,CAAL,CAAYnF,KAAZ;AACH;AACJ,G;AAED;;;;;;;SAKAkD,U,uBAAWF,O,EAAS;AAChB,QAAIV,IAAI,GAAG;AACPc,UAAI,EAAEJ;AADC,KAAX;AAIA/E,OAAG,CAACoH,OAAJ,CAAY;AACRC,YAAM,EAAE,MADA;AAERC,SAAG,EAAEtH,GAAG,CAACuH,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,0BAF7B;AAGRnD,UAAI,EAAJA;AAHQ,KAAZ;AAKH,G;AAED;;;;;;;SAKAiC,W,wBAAYzB,C,EAAG;AACXJ,KAAC,CAACI,CAAC,CAAC4C,MAAH,CAAD,CAAYC,OAAZ,CAAoB,QAApB,EAA8BC,WAA9B,CAA0C,QAA1C;AACH,G;AAED;;;;;;;SAKAtB,W,wBAAYf,K,EAAO;AACftF,OAAG,CAACoH,OAAJ,CAAY;AACRC,YAAM,EAAE,QADA;AAERC,SAAG,EAAEtH,GAAG,CAACuH,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,qBAAhC,GAAwDlC,KAAK,CAACa,EAAN;AAFrD,KAAZ,EAGGyB,IAHH,CAII,KAAKC,cAAL,CAAoBjC,IAApB,CAAyB,IAAzB,CAJJ;AAMH,G;AAED;;;;;;;SAKAE,c,2BAAejB,C,EAAG;AACdA,KAAC,CAACiD,cAAF;AAEA,QAAIzD,IAAI,GAAG,KAAK0B,GAAhB,CAHc,CAKd;;AACA/F,OAAG,CAACoH,OAAJ,CAAY;AACRC,YAAM,EAAE,MADA;AAERC,SAAG,EAAEtH,GAAG,CAACuH,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,oBAF7B;AAGRnD,UAAI,EAAJA;AAHQ,KAAZ,EAIGuD,IAJH,CAKI,KAAKC,cAAL,CAAoBjC,IAApB,CAAyB,IAAzB,CALJ;AAQA,SAAK5B,QAAL;AAEA1D,KAAC,CAACyH,MAAF;AACH,G;AAED;;;;;;;;;SAOAd,mB,gCAAoB3B,K,EAAO;AACvB,QAAI,CAACA,KAAK,CAACa,EAAN,EAAL,EAAiB;AAEjB,QAAI9B,IAAI,GAAGiB,KAAK,CAACjB,IAAjB;AAEArE,OAAG,CAACoH,OAAJ,CAAY;AACRC,YAAM,EAAE,MADA;AAERC,SAAG,EAAEtH,GAAG,CAACuH,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC,qBAAhC,GAAwDlC,KAAK,CAACa,EAAN,EAFrD;AAGR9B,UAAI,EAAJA;AAHQ,KAAZ,EAIGuD,IAJH,CAKI,KAAKC,cAAL,CAAoBjC,IAApB,CAAyB,IAAzB,CALJ;AAOH,G;AAED;;;;;;;SAKAiC,c,2BAAeG,M,EAAQ;AACnB,QAAIC,KAAK,GAAGjI,GAAG,CAACwD,KAAJ,CAAU0E,WAAV,CAAsBF,MAAtB,CAAZ,CADmB,CAGnB;;AACA,QAAI,EAAEC,KAAK,YAAYE,KAAnB,KAA6BF,KAAK,CAACG,UAAN,EAAjC,EAAqD;AACjDpI,SAAG,CAACwD,KAAJ,CAAU6E,MAAV,CAAiBJ,KAAjB;AACH;;AAED,SAAK/D,QAAL,GAAgBlE,GAAG,CAACwD,KAAJ,CAAU8E,GAAV,CAAc,kBAAd,CAAhB;AAEA,SAAKrE,OAAL,GAAe,KAAf;AACA3D,KAAC,CAACyH,MAAF;AACH,G;AAED;;;;;SAGA5D,Y,2BAAe;AACX,SAAKF,OAAL,GAAe,IAAf;AAEA,WAAOjE,GAAG,CAACoH,OAAJ,CAAY;AACfC,YAAM,EAAE,KADO;AAEfC,SAAG,EAAEtH,GAAG,CAACuH,KAAJ,CAAUC,SAAV,CAAoB,QAApB,IAAgC;AAFtB,KAAZ,EAGJI,IAHI,CAIH,KAAKC,cAAL,CAAoBjC,IAApB,CAAyB,IAAzB,CAJG,CAAP;AAMH,G;AAED;;;;;SAGA5B,Q,uBAAW;AACP,SAAK+B,GAAL,GAAW;AACP,YAAMzF,CAAC,CAACiB,IAAF,EADC;AAEP,cAAQjB,CAAC,CAACiB,IAAF,CAAO,EAAP,CAFD;AAGP,qBAAejB,CAAC,CAACiB,IAAF,CAAO,EAAP,CAHR;AAIP,gBAAUjB,CAAC,CAACiB,IAAF,CAAO,EAAP,CAJH;AAKP,cAAQjB,CAAC,CAACiB,IAAF,CAAO,EAAP,CALD;AAMP,kBAAYjB,CAAC,CAACiB,IAAF,CAAO,KAAP,CANL;AAOP,gBAAUjB,CAAC,CAACiB,IAAF,CAAO,KAAP,CAPH;AAQP,cAAQjB,CAAC,CAACiB,IAAF,CAAO,IAAP,CARD;AASP,oBAAcjB,CAAC,CAACiB,IAAF,CAAO,EAAP;AATP,KAAX;AAWH,G;AAED;;;;;;;SAKAyF,U,uBAAW1B,K,EAAO;AACd,QAAIA,KAAK,CAACiB,IAAN,EAAJ,EAAkB;AACd,aAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH,G;AAED;;;;;;SAIAK,c,6BAAiB;AACb,WAAO;AACHU,SAAG,EAAEtH,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,oCAArB,CADF;AAEHoH,WAAK,EAAEvI,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,sCAArB,CAFJ;AAGHqH,aAAO,EAAExI,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,wCAArB,CAHN;AAIHsH,YAAM,EAAEzI,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAJL;AAKHuH,UAAI,EAAE1I,GAAG,CAACkB,UAAJ,CAAeC,KAAf,CAAqB,yCAArB;AALH,KAAP;AAOH,G;;;EA/Z6CmC,uD;;;;;;;;;;;;;;;;;;;;;;ACPlD;AACA;;IAEqBI,K;;;;;;;;;;;AAajB;;;;;;SAMAiF,W,0BAAc;AACV,WAAO,wBAAwB,KAAKzC,MAAL,GAAc,MAAM,KAAK7B,IAAL,CAAU8B,EAA9B,GAAmC,EAA3D,CAAP;AACH,G;;;EArB8ByC,yDAAK,CAACC,mDAAD,EAAQ;AAC5CtC,MAAI,EAAEsC,mDAAK,CAACrB,SAAN,CAAgB,MAAhB,CADsC;AAE5CvG,aAAW,EAAE4H,mDAAK,CAACrB,SAAN,CAAgB,aAAhB,CAF+B;AAG5CX,MAAI,EAAEgC,mDAAK,CAACrB,SAAN,CAAgB,MAAhB,CAHsC;AAI5CV,YAAU,EAAE+B,mDAAK,CAACrB,SAAN,CAAgB,YAAhB,CAJgC;AAK5Cd,UAAQ,EAAEmC,mDAAK,CAACrB,SAAN,CAAgB,UAAhB,CALkC;AAM5CsB,QAAM,EAAED,mDAAK,CAACrB,SAAN,CAAgB,QAAhB,CANoC;AAO5CzG,MAAI,EAAE8H,mDAAK,CAACrB,SAAN,CAAgB,MAAhB,CAPsC;AAQ5CrC,MAAI,EAAE0D,mDAAK,CAACrB,SAAN,CAAgB,MAAhB,CARsC;AAS5CY,YAAU,EAAES,mDAAK,CAACrB,SAAN,CAAgB,YAAhB,EAA8BqB,mDAAK,CAACE,aAApC,CATgC;AAU5CC,QAAM,EAAEH,mDAAK,CAACI,MAAN,CAAa,QAAb,CAVoC;AAW5CxC,QAAM,EAAEoC,mDAAK,CAACrB,SAAN,CAAgB,QAAhB;AAXoC,CAAR,C;;;;;;;;;;;;;ACHxC,iD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,0D","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import {extend} from \"flarum/extend\";\nimport AdminNav from \"flarum/components/AdminNav\";\nimport AdminLinkButton from \"flarum/components/AdminLinkButton\";\nimport ProfileConfigurePane from './panes/ProfileConfigurePane';\n\nexport default function () {\n    // create the route\n    app.routes['flagrow-masquerade-configure-profile'] = {path: '/flagrow/masquerade/configure', component: ProfileConfigurePane.component()};\n\n    // bind the route we created to the three dots settings button\n    app.extensionSettings['flagrow-masquerade'] = () => m.route(app.route('flagrow-masquerade-configure-profile'));\n\n    extend(AdminNav.prototype, 'items', items => {\n        // add the Image Upload tab to the admin navigation menu\n        items.add('flagrow-masquerade-configure-profile', AdminLinkButton.component({\n            href: app.route('flagrow-masquerade-configure-profile'),\n            icon: 'id-card-o',\n            children: 'Masquerade',\n            description: app.translator.trans('flagrow-masquerade.admin.menu.description')\n        }));\n    });\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport icon from 'flarum/helpers/icon';\n\nexport default class SelectFieldOptionEditor extends Component {\n    init() {\n        this.newOption = m.prop('');\n    }\n\n    view() {\n        return m('li', [\n            m('label', app.translator.trans('flagrow-masquerade.admin.fields.options')),\n            m('table', m('tbody', this.options().map((option, optionIndex) => m('tr', [\n                m('td', m('input[type=text].FormControl', {\n                    oninput: m.withAttr('value', value => {\n                        this.updateOption(optionIndex, value);\n                    }),\n                    value: option,\n                })),\n                m('td', m('button.Button', {\n                    onclick: () => {\n                        this.moveOption(optionIndex, -1);\n                    },\n                }, icon('chevron-up'))),\n                m('td', m('button.Button', {\n                    onclick: () => {\n                        this.moveOption(optionIndex, 1);\n                    },\n                }, icon('chevron-down'))),\n                m('td', m('button.Button.Button--danger', {\n                    onclick: () => {\n                        this.deleteOption(optionIndex);\n                    },\n                }, icon('close'))),\n            ])))),\n            m('.helpText', app.translator.trans('flagrow-masquerade.admin.fields.option-coma-warning')),\n            m('table', m('tbody'), m('tr', [\n                m('td', m('input[type=text].FormControl', {\n                    onchange: m.withAttr('value', this.newOption),\n                    value: this.newOption(),\n                    placeholder: app.translator.trans('flagrow-masquerade.admin.fields.option-new'),\n                })),\n                m('td', m('button.Button.Button--primary', {\n                    onclick: () => {\n                        this.addOption();\n                    },\n                }, icon('plus'))),\n            ])),\n        ]);\n    }\n\n    updateRules(options) {\n        // We ignore other existing rules, they would probably be leftovers from another field type when changing types\n        this.props.onchange('in:' + options.join(','));\n    }\n\n    options() {\n        const rules = this.props.value.split('|');\n\n        let options = [];\n\n        rules.forEach(rule => {\n            const parts = rule.split(':', 2);\n\n            if (parts[0] === 'in') {\n                options = parts[1].split(',');\n            }\n        });\n\n        return options;\n    }\n\n    updateOption(index, value) {\n        let options = this.options();\n\n        options[index] = value;\n\n        this.updateRules(options);\n    }\n\n    moveOption(index, moveIndex) {\n        let options = this.options();\n\n        const newIndex = index + moveIndex;\n\n        if (newIndex < 0 || newIndex > options.length - 1) {\n            return;\n        }\n\n        const move = options.splice(index, 1);\n\n        options.splice(newIndex, 0, move[0]);\n\n        this.updateRules(options);\n    }\n\n    deleteOption(index) {\n        let options = this.options();\n\n        options.splice(index, 1);\n\n        this.updateRules(options);\n    }\n\n    addOption() {\n        if (this.newOption() === '') {\n            return;\n        }\n\n        let options = this.options();\n\n        options.push(this.newOption());\n\n        this.newOption('');\n\n        this.updateRules(options);\n    }\n}\n","import {extend} from \"flarum/extend\";\nimport app from \"flarum/app\";\nimport PermissionGrid from \"flarum/components/PermissionGrid\";\nimport Field from \"./../lib/models/Field\";\nimport addProfileConfigurePane from './addProfileConfigurePane';\n\napp.initializers.add('flagrow-masquerade', app => {\n    app.store.models['masquerade-field'] = Field;\n\n    // add the permission option for viewing a masquerade profile\n    extend(PermissionGrid.prototype, 'viewItems', items => {\n        items.add('masquerade-view-profile', {\n            icon: 'id-card-o',\n            label: app.translator.trans('flagrow-masquerade.admin.permissions.view-profile'),\n            permission: 'flagrow.masquerade.view-profile',\n            allowGuest: true\n        });\n    });\n    // add the permission option for creating a masquerade profile\n    extend(PermissionGrid.prototype, 'startItems', items => {\n        items.add('masquerade-have-profile', {\n            icon: 'id-card-o',\n            label: app.translator.trans('flagrow-masquerade.admin.permissions.have-profile'),\n            permission: 'flagrow.masquerade.have-profile'\n        });\n    });\n\n    addProfileConfigurePane();\n});\n","import Component from \"flarum/Component\";\nimport Select from \"flarum/components/Select\";\nimport Switch from \"flarum/components/Switch\";\nimport Button from \"flarum/components/Button\";\nimport saveSettings from \"flarum/utils/saveSettings\";\nimport SelectFieldOptionEditor from '../components/SelectFieldOptionEditor';\n\nexport default class ProfileConfigurePane extends Component {\n\n    /**\n     * Sets up the component.\n     */\n    init() {\n        this.resetNew();\n        this.loading = false;\n        this.existing = [];\n        this.loadExisting();\n        this.enforceProfileCompletion = m.prop(app.data.settings['masquerade.force-profile-completion'] == 1);\n        this.disableUserBio = m.prop(app.data.settings['masquerade.disable-user-bio'] == 1);\n    }\n\n    /**\n     * Configures the component.\n     */\n    config() {\n        this.$('.Existing--Fields')\n            .sortable({\n                cancel: ''\n            })\n            .on('sortupdate', (e, ui) => {\n                const sorting = this.$('.Existing--Fields > .Field')\n                    .map(function () {\n                        return $(this).data('id');\n                    })\n                    .get();\n\n                this.updateSort(sorting);\n            });\n    }\n\n    /**\n     * Generates the component view.\n     *\n     * @returns {*}\n     */\n    view() {\n        let fields = [];\n\n        this.existing\n            .sort((a, b) => a.sort() - b.sort())\n            .forEach(field => {\n                // Build array of fields to show.\n                fields.push(this.addField(field))\n            });\n\n        return m('div', {\n            className: 'ProfileConfigurePane'\n        }, [\n            m('div', {className: 'container'}, [\n                m('form', {\n                    className: 'Configuration'\n                }, [\n                    m('label', ''), [\n                        Switch.component({\n                            state: this.enforceProfileCompletion(),\n                            onchange: this.updateSetting.bind(this, this.enforceProfileCompletion, 'masquerade.force-profile-completion'),\n                            children: app.translator.trans('flagrow-masquerade.admin.fields.force-user-to-completion')\n                        }),\n                        m('br')\n                    ],\n                    m('label', ''), [\n                        Switch.component({\n                            state: this.disableUserBio(),\n                            onchange: this.updateSetting.bind(this, this.disableUserBio, 'masquerade.disable-user-bio'),\n                            children: app.translator.trans('flagrow-masquerade.admin.fields.disable-user-bio')\n                        }),\n                        m('br')\n                    ]\n                ]),\n                m('form', {\n                        className: 'Existing--Fields'\n                    },\n                    fields\n                ),\n                m('form', {onsubmit: this.submitAddField.bind(this)}, [\n                    this.addField(this.new)\n                ])\n            ])\n        ])\n    }\n\n    /**\n     * Updates setting in database.\n     * @param prop\n     * @param setting\n     * @param value\n     */\n    updateSetting(prop, setting, value)\n    {\n        saveSettings({\n            [setting]: value\n        });\n\n        prop(value)\n    }\n\n    /**\n     * Creates a field in the DOM.\n     *\n     * @param field\n     * @returns {*}\n     */\n    addField(field) {\n        let exists = field.id();\n\n        return m('fieldset', {\n            className: 'Field',\n            'data-id': field.id()\n        }, [\n            m('legend', [\n                exists ? m('div', {className: 'ButtonGroup pull-right'}, [\n                    Button.component({\n                        className: 'Button Button--icon Button--danger',\n                        icon: \"trash\",\n                        onclick: this.deleteField.bind(this, field)\n                    })\n                ]) : null,\n                m(\n                    'span', {\n                        className: 'title',\n                        onclick: (e) => this.toggleField(e)\n                    },\n                    app.translator.trans('flagrow-masquerade.admin.fields.' + (exists ? 'edit' : 'add'), {\n                        field: field.name()\n                    })\n                )\n            ]),\n            m('ul', [\n                m('li', [\n                    m('label', app.translator.trans('flagrow-masquerade.admin.fields.name')),\n                    m('input', {\n                        className: 'FormControl',\n                        value: field.name(),\n                        oninput: m.withAttr('value', this.updateExistingFieldInput.bind(this, 'name', field))\n                    }),\n                    m('span', {className: 'helpText'}, app.translator.trans('flagrow-masquerade.admin.fields.name-help'))\n                ]),\n                m('li', [\n                    m('label', app.translator.trans('flagrow-masquerade.admin.fields.description')),\n                    m('input', {\n                        className: 'FormControl',\n                        value: field.description(),\n                        oninput: m.withAttr('value', this.updateExistingFieldInput.bind(this, 'description', field))\n                    }),\n                    m('span', {className: 'helpText'}, app.translator.trans('flagrow-masquerade.admin.fields.description-help'))\n                ]),\n                m('li', [\n                    m('label', app.translator.trans('flagrow-masquerade.admin.fields.icon')),\n                    m('input', {\n                        className: 'FormControl',\n                        value: field.icon(),\n                        oninput: m.withAttr('value', this.updateExistingFieldInput.bind(this, 'icon', field))\n                    }),\n                    m('span', {className: 'helpText'}, app.translator.trans('flagrow-masquerade.admin.fields.icon-help', {\n                        a: <a href=\"http://fontawesome.io/icons/\" target=\"_blank\"/>\n                    }))\n                ]),\n                // @todo Disabled for now, wasn't really showing up nicely.\n                // m('li', [\n                //     m('label', app.translator.trans('flagrow-masquerade.admin.fields.prefix')),\n                //     m('input', {\n                //         className: 'FormControl',\n                //         value: field.prefix(),\n                //         oninput: m.withAttr('value', this.updateExistingFieldInput.bind(this, 'prefix', field))\n                //     }),\n                //     m('span', {className: 'helpText'}, app.translator.trans('flagrow-masquerade.admin.fields.prefix-help'))\n                // ]),\n                m('li', [\n                    m('label', ''), [\n                        Switch.component({\n                            state: field.on_bio(),\n                            onchange: this.updateExistingFieldInput.bind(this, 'on_bio', field),\n                            children: app.translator.trans('flagrow-masquerade.admin.fields.on_bio')\n                        }),\n                        m('br')\n                    ]\n                ]),\n                m('li', [\n                    m('label', ''), [\n                        Switch.component({\n                            state: field.required(),\n                            onchange: this.updateExistingFieldInput.bind(this, 'required', field),\n                            children: app.translator.trans('flagrow-masquerade.admin.fields.required')\n                        }),\n                        m('br')\n                    ]\n                ]),\n                m('li', [\n                    m('label', app.translator.trans('flagrow-masquerade.admin.fields.type')),\n                    Select.component({\n                        onchange: value => {\n                            if (value === 'null') {\n                                value = null;\n                            }\n\n                            this.updateExistingFieldInput('type', field, value);\n                        },\n                        options: this.availableTypes(),\n                        value: field.type(),\n                    }),\n                ]),\n                (field.type() === 'select' ? SelectFieldOptionEditor.component({\n                    onchange: value => {\n                        this.updateExistingFieldInput('validation', field, value);\n                    },\n                    value: field.validation(),\n                }) : null),\n                (field.type() === null ? m('li', [\n                    m('label', app.translator.trans('flagrow-masquerade.admin.fields.validation')),\n                    m('input', {\n                        className: 'FormControl',\n                        value: field.validation(),\n                        oninput: m.withAttr('value', this.updateExistingFieldInput.bind(this, 'validation', field))\n                    }),\n                    m('span', {className: 'helpText'}, app.translator.trans('flagrow-masquerade.admin.fields.validation-help', {\n                        a: <a href=\"https://laravel.com/docs/5.2/validation#available-validation-rules\"\n                              target=\"_blank\"/>\n                    }))\n                ]) : null),\n                m('li', {className: 'ButtonGroup'}, [\n                    Button.component({\n                        type: 'submit',\n                        className: 'Button Button--primary',\n                        children: app.translator.trans('flagrow-masquerade.admin.buttons.' + (exists ? 'edit' : 'add') + '-field'),\n                        loading: this.loading,\n                        disabled: !this.readyToAdd(field),\n                        onclick: this.updateExistingField.bind(this, field)\n                    }),\n                    (exists ? Button.component({\n                        type: 'submit',\n                        className: 'Button Button--danger',\n                        children: app.translator.trans('flagrow-masquerade.admin.buttons.delete-field'),\n                        loading: this.loading,\n                        onclick: this.deleteField.bind(this, field),\n                    }) : '')\n                ])\n            ])\n        ]);\n    }\n\n    updateExistingFieldInput(what, field, value) {\n        let exists = field.id();\n\n        if (exists) {\n            field.pushAttributes({\n                [what]: value\n            })\n        } else {\n            field[what](value);\n        }\n    }\n\n    /**\n     * Sorts the fields.\n     *\n     * @param Array sort\n     */\n    updateSort(sorting) {\n        let data = {\n            sort: sorting\n        };\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/masquerade/fields/order',\n            data\n        });\n    }\n\n    /**\n     * Opens and closes field configuration sets.\n     *\n     * @param e\n     */\n    toggleField(e) {\n        $(e.target).parents('.Field').toggleClass('active');\n    }\n\n    /**\n     * Deletes a field configuration set.\n     *\n     * @param field\n     */\n    deleteField(field) {\n        app.request({\n            method: 'DELETE',\n            url: app.forum.attribute('apiUrl') + '/masquerade/fields/' + field.id(),\n        }).then(\n            this.requestSuccess.bind(this)\n        );\n    }\n\n    /**\n     * Saves the settings to the database and redraw the page\n     *\n     * @param e\n     */\n    submitAddField(e) {\n        e.preventDefault();\n\n        let data = this.new;\n\n        // @todo xhr call app.request\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/masquerade/fields',\n            data\n        }).then(\n            this.requestSuccess.bind(this)\n        );\n\n        this.resetNew();\n\n        m.redraw();\n    }\n\n    /**\n     * Updates the value of one field.\n     *\n     * @param label\n     * @param field\n     * @param value\n     */\n    updateExistingField(field) {\n        if (!field.id()) return;\n\n        let data = field.data;\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/masquerade/fields/' + field.id(),\n            data\n        }).then(\n            this.requestSuccess.bind(this)\n        );\n    }\n\n    /**\n     * Parses result to update DOM.\n     *\n     * @param result\n     */\n    requestSuccess(result) {\n        let model = app.store.pushPayload(result);\n\n        // In case we've updated/deleted one instance delete it if necessary.\n        if (!(model instanceof Array) && model.deleted_at()) {\n            app.store.remove(model);\n        }\n\n        this.existing = app.store.all('masquerade-field');\n\n        this.loading = false;\n        m.redraw()\n    }\n\n    /**\n     * Retrieves list of fields.\n     */\n    loadExisting() {\n        this.loading = true;\n\n        return app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/masquerade/fields'\n        }).then(\n            this.requestSuccess.bind(this)\n        );\n    }\n\n    /**\n     * Resets the new field.\n     */\n    resetNew() {\n        this.new = {\n            'id': m.prop(),\n            'name': m.prop(''),\n            'description': m.prop(''),\n            'prefix': m.prop(''),\n            'icon': m.prop(''),\n            'required': m.prop(false),\n            'on_bio': m.prop(false),\n            'type': m.prop(null),\n            'validation': m.prop('')\n        };\n    }\n\n    /**\n     * Checks whether creation field is completed.\n     *\n     * @returns boolean\n     */\n    readyToAdd(field) {\n        if (field.name()) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * List of field types availables\n     * @returns {Array}\n     */\n    availableTypes() {\n        return {\n            url: app.translator.trans('flagrow-masquerade.admin.types.url'),\n            email: app.translator.trans('flagrow-masquerade.admin.types.email'),\n            boolean: app.translator.trans('flagrow-masquerade.admin.types.boolean'),\n            select: app.translator.trans('flagrow-masquerade.admin.types.select'),\n            null: app.translator.trans('flagrow-masquerade.admin.types.advanced'),\n        };\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Field extends mixin(Model, {\n    name: Model.attribute('name'),\n    description: Model.attribute('description'),\n    type: Model.attribute('type'),\n    validation: Model.attribute('validation'),\n    required: Model.attribute('required'),\n    prefix: Model.attribute('prefix'),\n    icon: Model.attribute('icon'),\n    sort: Model.attribute('sort'),\n    deleted_at: Model.attribute('deleted_at', Model.transformDate),\n    answer: Model.hasOne('answer'),\n    on_bio: Model.attribute('on_bio')\n}) {\n    /**\n     * Construct a path to the API endpoint for this resource.\n     *\n     * @return {String}\n     * @protected\n     */\n    apiEndpoint() {\n        return '/masquerade/fields' + (this.exists ? '/' + this.data.id : '');\n    }\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/PermissionGrid'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/saveSettings'];"],"sourceRoot":""}