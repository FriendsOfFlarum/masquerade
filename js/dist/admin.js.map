{"version":3,"sources":["webpack://@fof/masquerade/webpack/bootstrap","webpack://@fof/masquerade/./admin.js","webpack://@fof/masquerade/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/masquerade/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/masquerade/./node_modules/html5sortable/dist/html5sortable.es.js","webpack://@fof/masquerade/./src/admin/components/MasqueradePage.js","webpack://@fof/masquerade/./src/admin/components/SelectFieldOptionEditor.js","webpack://@fof/masquerade/./src/admin/index.js","webpack://@fof/masquerade/./src/lib/models/Field.js","webpack://@fof/masquerade/external \"flarum.core.compat['admin/app']\"","webpack://@fof/masquerade/external \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/masquerade/external \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/masquerade/external \"flarum.core.compat['common/Component']\"","webpack://@fof/masquerade/external \"flarum.core.compat['common/Model']\"","webpack://@fof/masquerade/external \"flarum.core.compat['common/components/Button']\"","webpack://@fof/masquerade/external \"flarum.core.compat['common/components/Select']\"","webpack://@fof/masquerade/external \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/masquerade/external \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/masquerade/external \"flarum.core.compat['common/utils/withAttr']\""],"names":["_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","setPrototypeOf","_setPrototypeOf","o","p","__proto__","addData","element","key","value","undefined","h5s","data","removeData","_filter","nodes","selector","NodeList","HTMLCollection","Array","Error","from","filter","item","nodeType","matches","stores","Map","Store","_config","_placeholder","_data","defineProperty","get","config","forEach","set","mergedConfig","assign","entries","enumerable","configurable","setConfig","has","getConfig","placeholder","HTMLElement","setData","getData","deleteData","store","sortableElement","addEventListener","eventName","callback","i","length","removeEventListener","addAttribute","attribute","setAttribute","removeAttribute","_offset","parentElement","getClientRects","rect","left","window","pageXOffset","right","top","pageYOffset","bottom","_debounce","func","wait","timeout","args","_i","arguments","clearTimeout","setTimeout","apply","_index","elementList","indexOf","isInDom","parentNode","insertNode","referenceNode","newElement","position","insertBefore","nextElementSibling","target","insertAfter","_serialize","sortableContainer","customItemSerializer","customContainerSerializer","serializedItem","serializedContainer","isSortable","options","items","children","serializedItems","map","parent","node","html","outerHTML","index","container","itemCount","_makePlaceholder","placeholderClass","_a","includes","tagName","document","createElement","innerHTML","classList","add","split","_getElementHeight","style","getComputedStyle","getPropertyValue","parseInt","int","isNaN","reduce","sum","_getElementWidth","_getHandles","querySelector","shadowRoot","getEventTarget","event","composedPath","defaultDragImage","draggedElement","elementOffset","posX","pageX","posY","pageY","setDragImage","customDragImage","Event","dataTransfer","dragImage","effectAllowed","id","_listsConnected","destination","origin","acceptFrom","sel","defaultConfiguration","connectWith","disableIEFix","copy","draggingClass","hoverClass","dropTargetContainerClass","debounce","throttleTime","maxItems","itemSerializer","containerSerializer","orientation","_throttle","fn","threshold","_this","lastEventTimestamp","now","Date","enableHoverClass","enable","hoverClasses_1","buttons","_b","remove","dragging","draggingHeight","draggingWidth","originContainer","originIndex","originElementIndex","originItemsBeforeUpdate","previousContainer","destinationItemsBeforeUpdate","_removeItemEvents","_removeContainerEvents","_getDragging","draggedItem","sortable","ditem","cloneNode","appendChild","display","oldDisplay","_removeSortableData","_removeItemData","findSortable","find","el","findDragElement","itemlist","ele","contains","_destroySortable","opts","handles","handle","_enableSortable","spanEl","dragDrop","_disableSortable","_reloadSortable","sortableElements","method","String","querySelectorAll","slice","call","test","configKey","hasOwnProperty","console","warn","listItems","customPlaceholder","tempContainer","e","stopImmediatePropagation","getAttribute","dragItem","dispatchEvent","CustomEvent","detail","elementIndex","originalTarget","itemsBeforeUpdate","outTarget","relatedTarget","fromElement","currentTarget","visiblePlaceholder","values","preventDefault","stopPropagation","originItems","destinationContainer","destinationItems","destinationElementIndex","destinationIndex","debouncedDragOverEnter","forcePlaceholderSize","height","width","thisHeight","thisWidth","placeholderIndex","thisIndex","deadZoneVertical","deadZoneHorizontal","offsetTop","offsetLeft","placeAfter","elementMiddleVertical","offsetHeight","elementMiddleHorizontal","offsetWidth","placeholders","onDragOverEnter","dropEffect","concat","destroy","disable","__testing","MasqueradePage","oninit","vnode","resetNew","loading","existing","loadExisting","enforceProfileCompletion","app","settings","sorting","$","updateSort","oncreate","onupdate","content","m","translator","trans","Switch","component","state","onchange","saveValue","saveSettings","field","addField","exists","Button","className","icon","onclick","deleteField","bind","toggleField","name","oninput","withAttr","updateExistingFieldInput","description","a","on_bio","required","Select","availableTypes","type","SelectFieldOptionEditor","validation","disabled","readyToAdd","updateExistingField","submitAddField","what","pushAttributes","request","url","forum","body","sort","then","requestSuccess","parents","toggleClass","save","attributes","redraw","all","b","result","pushPayload","createRecord","prefix","email","select","ExtensionPage","newOption","view","option","optionIndex","updateOption","moveOption","deleteOption","addOption","updateRules","attrs","join","rules","rule","parts","moveIndex","newIndex","move","splice","push","Component","initializers","models","Field","extensionData","registerPage","registerPermission","label","permission","allowGuest","Model","deleted_at","transformDate","answer","hasOne","apiEndpoint"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","/*\n * HTML5Sortable package\n * https://github.com/lukasoppermann/html5sortable\n *\n * Maintained by Lukas Oppermann <lukas@vea.re>\n *\n * Released under the MIT license.\n */\n/**\n * Get or set data on element\n * @param {HTMLElement} element\n * @param {string} key\n * @param {any} value\n * @return {*}\n */\nfunction addData(element, key, value) {\n    if (value === undefined) {\n        return element && element.h5s && element.h5s.data && element.h5s.data[key];\n    }\n    else {\n        element.h5s = element.h5s || {};\n        element.h5s.data = element.h5s.data || {};\n        element.h5s.data[key] = value;\n    }\n}\n/**\n * Remove data from element\n * @param {HTMLElement} element\n */\nfunction removeData(element) {\n    if (element.h5s) {\n        delete element.h5s.data;\n    }\n}\n\n/* eslint-env browser */\n/**\n * Filter only wanted nodes\n * @param {NodeList|HTMLCollection|Array} nodes\n * @param {String} selector\n * @returns {Array}\n */\nvar _filter = (function (nodes, selector) {\n    if (!(nodes instanceof NodeList || nodes instanceof HTMLCollection || nodes instanceof Array)) {\n        throw new Error('You must provide a nodeList/HTMLCollection/Array of elements to be filtered.');\n    }\n    if (typeof selector !== 'string') {\n        return Array.from(nodes);\n    }\n    return Array.from(nodes).filter(function (item) { return item.nodeType === 1 && item.matches(selector); });\n});\n\n/* eslint-env browser */\nvar stores = new Map();\n/**\n * Stores data & configurations per Sortable\n * @param {Object} config\n */\nvar Store = /** @class */ (function () {\n    function Store() {\n        this._config = new Map(); // eslint-disable-line no-undef\n        this._placeholder = undefined; // eslint-disable-line no-undef\n        this._data = new Map(); // eslint-disable-line no-undef\n    }\n    Object.defineProperty(Store.prototype, \"config\", {\n        /**\n         * get the configuration map of a class instance\n         * @method config\n         * @return {object}\n         */\n        get: function () {\n            // transform Map to object\n            var config = {};\n            this._config.forEach(function (value, key) {\n                config[key] = value;\n            });\n            // return object\n            return config;\n        },\n        /**\n         * set the configuration of a class instance\n         * @method config\n         * @param {object} config object of configurations\n         */\n        set: function (config) {\n            if (typeof config !== 'object') {\n                throw new Error('You must provide a valid configuration object to the config setter.');\n            }\n            // combine config with default\n            var mergedConfig = Object.assign({}, config);\n            // add config to map\n            this._config = new Map(Object.entries(mergedConfig));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * set individual configuration of a class instance\n     * @method setConfig\n     * @param  key valid configuration key\n     * @param  value any value\n     * @return void\n     */\n    Store.prototype.setConfig = function (key, value) {\n        if (!this._config.has(key)) {\n            throw new Error(\"Trying to set invalid configuration item: \" + key);\n        }\n        // set config\n        this._config.set(key, value);\n    };\n    /**\n     * get an individual configuration of a class instance\n     * @method getConfig\n     * @param  key valid configuration key\n     * @return any configuration value\n     */\n    Store.prototype.getConfig = function (key) {\n        if (!this._config.has(key)) {\n            throw new Error(\"Invalid configuration item requested: \" + key);\n        }\n        return this._config.get(key);\n    };\n    Object.defineProperty(Store.prototype, \"placeholder\", {\n        /**\n         * get the placeholder for a class instance\n         * @method placeholder\n         * @return {HTMLElement|null}\n         */\n        get: function () {\n            return this._placeholder;\n        },\n        /**\n         * set the placeholder for a class instance\n         * @method placeholder\n         * @param {HTMLElement} placeholder\n         * @return {void}\n         */\n        set: function (placeholder) {\n            if (!(placeholder instanceof HTMLElement) && placeholder !== null) {\n                throw new Error('A placeholder must be an html element or null.');\n            }\n            this._placeholder = placeholder;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * set an data entry\n     * @method setData\n     * @param {string} key\n     * @param {any} value\n     * @return {void}\n     */\n    Store.prototype.setData = function (key, value) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        this._data.set(key, value);\n    };\n    /**\n     * get an data entry\n     * @method getData\n     * @param {string} key an existing key\n     * @return {any}\n     */\n    Store.prototype.getData = function (key) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        return this._data.get(key);\n    };\n    /**\n     * delete an data entry\n     * @method deleteData\n     * @param {string} key an existing key\n     * @return {boolean}\n     */\n    Store.prototype.deleteData = function (key) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        return this._data.delete(key);\n    };\n    return Store;\n}());\n/**\n * @param {HTMLElement} sortableElement\n * @returns {Class: Store}\n */\nvar store = (function (sortableElement) {\n    // if sortableElement is wrong type\n    if (!(sortableElement instanceof HTMLElement)) {\n        throw new Error('Please provide a sortable to the store function.');\n    }\n    // create new instance if not avilable\n    if (!stores.has(sortableElement)) {\n        stores.set(sortableElement, new Store());\n    }\n    // return instance\n    return stores.get(sortableElement);\n});\n\n/**\n * @param {Array|HTMLElement} element\n * @param {Function} callback\n * @param {string} event\n */\nfunction addEventListener(element, eventName, callback) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            addEventListener(element[i], eventName, callback);\n        }\n        return;\n    }\n    element.addEventListener(eventName, callback);\n    store(element).setData(\"event\" + eventName, callback);\n}\n/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} eventName\n */\nfunction removeEventListener(element, eventName) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            removeEventListener(element[i], eventName);\n        }\n        return;\n    }\n    element.removeEventListener(eventName, store(element).getData(\"event\" + eventName));\n    store(element).deleteData(\"event\" + eventName);\n}\n\n/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction addAttribute(element, attribute, value) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            addAttribute(element[i], attribute, value);\n        }\n        return;\n    }\n    element.setAttribute(attribute, value);\n}\n/**\n * @param {Array|HTMLElement} element\n * @param {string} attribute\n */\nfunction removeAttribute(element, attribute) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            removeAttribute(element[i], attribute);\n        }\n        return;\n    }\n    element.removeAttribute(attribute);\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {Object}\n */\nvar _offset = (function (element) {\n    if (!element.parentElement || element.getClientRects().length === 0) {\n        throw new Error('target element must be part of the dom');\n    }\n    var rect = element.getClientRects()[0];\n    return {\n        left: rect.left + window.pageXOffset,\n        right: rect.right + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        bottom: rect.bottom + window.pageYOffset\n    };\n});\n\n/**\n * Creates and returns a new debounced version of the passed function which will postpone its execution until after wait milliseconds have elapsed\n * @param {Function} func to debounce\n * @param {number} time to wait before calling function with latest arguments, 0 - no debounce\n * @returns {function} - debounced function\n */\nvar _debounce = (function (func, wait) {\n    if (wait === void 0) { wait = 0; }\n    var timeout;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n            func.apply(void 0, args);\n        }, wait);\n    };\n});\n\n/* eslint-env browser */\n/**\n * Get position of the element relatively to its sibling elements\n * @param {HTMLElement} element\n * @returns {number}\n */\nvar _index = (function (element, elementList) {\n    if (!(element instanceof HTMLElement) || !(elementList instanceof NodeList || elementList instanceof HTMLCollection || elementList instanceof Array)) {\n        throw new Error('You must provide an element and a list of elements.');\n    }\n    return Array.from(elementList).indexOf(element);\n});\n\n/* eslint-env browser */\n/**\n * Test whether element is in DOM\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nvar isInDom = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('Element is not a node element.');\n    }\n    return element.parentNode !== null;\n});\n\n/* eslint-env browser */\n/**\n * Insert node before or after target\n * @param {HTMLElement} referenceNode - reference element\n * @param {HTMLElement} newElement - element to be inserted\n * @param {String} position - insert before or after reference element\n */\nvar insertNode = function (referenceNode, newElement, position) {\n    if (!(referenceNode instanceof HTMLElement) || !(referenceNode.parentElement instanceof HTMLElement)) {\n        throw new Error('target and element must be a node');\n    }\n    referenceNode.parentElement.insertBefore(newElement, (position === 'before' ? referenceNode : referenceNode.nextElementSibling));\n};\n/**\n * Insert before target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nvar insertBefore = function (target, element) { return insertNode(target, element, 'before'); };\n/**\n * Insert after target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nvar insertAfter = function (target, element) { return insertNode(target, element, 'after'); };\n\n/* eslint-env browser */\n/**\n * Filter only wanted nodes\n * @param {HTMLElement} sortableContainer\n * @param {Function} customSerializer\n * @returns {Array}\n */\nvar _serialize = (function (sortableContainer, customItemSerializer, customContainerSerializer) {\n    if (customItemSerializer === void 0) { customItemSerializer = function (serializedItem, sortableContainer) { return serializedItem; }; }\n    if (customContainerSerializer === void 0) { customContainerSerializer = function (serializedContainer) { return serializedContainer; }; }\n    // check for valid sortableContainer\n    if (!(sortableContainer instanceof HTMLElement) || !sortableContainer.isSortable === true) {\n        throw new Error('You need to provide a sortableContainer to be serialized.');\n    }\n    // check for valid serializers\n    if (typeof customItemSerializer !== 'function' || typeof customContainerSerializer !== 'function') {\n        throw new Error('You need to provide a valid serializer for items and the container.');\n    }\n    // get options\n    var options = addData(sortableContainer, 'opts');\n    var item = options.items;\n    // serialize container\n    var items = _filter(sortableContainer.children, item);\n    var serializedItems = items.map(function (item) {\n        return {\n            parent: sortableContainer,\n            node: item,\n            html: item.outerHTML,\n            index: _index(item, items)\n        };\n    });\n    // serialize container\n    var container = {\n        node: sortableContainer,\n        itemCount: serializedItems.length\n    };\n    return {\n        container: customContainerSerializer(container),\n        items: serializedItems.map(function (item) { return customItemSerializer(item, sortableContainer); })\n    };\n});\n\n/* eslint-env browser */\n/**\n * create a placeholder element\n * @param {HTMLElement} sortableElement a single sortable\n * @param {string|undefined} placeholder a string representing an html element\n * @param {string} placeholderClasses a string representing the classes that should be added to the placeholder\n */\nvar _makePlaceholder = (function (sortableElement, placeholder, placeholderClass) {\n    var _a;\n    if (placeholderClass === void 0) { placeholderClass = 'sortable-placeholder'; }\n    if (!(sortableElement instanceof HTMLElement)) {\n        throw new Error('You must provide a valid element as a sortable.');\n    }\n    // if placeholder is not an element\n    if (!(placeholder instanceof HTMLElement) && placeholder !== undefined) {\n        throw new Error('You must provide a valid element as a placeholder or set ot to undefined.');\n    }\n    // if no placeholder element is given\n    if (placeholder === undefined) {\n        if (['UL', 'OL'].includes(sortableElement.tagName)) {\n            placeholder = document.createElement('li');\n        }\n        else if (['TABLE', 'TBODY'].includes(sortableElement.tagName)) {\n            placeholder = document.createElement('tr');\n            // set colspan to always all rows, otherwise the item can only be dropped in first column\n            placeholder.innerHTML = '<td colspan=\"100\"></td>';\n        }\n        else {\n            placeholder = document.createElement('div');\n        }\n    }\n    // add classes to placeholder\n    if (typeof placeholderClass === 'string') {\n        (_a = placeholder.classList).add.apply(_a, placeholderClass.split(' '));\n    }\n    return placeholder;\n});\n\n/* eslint-env browser */\n/**\n * Get height of an element including padding\n * @param {HTMLElement} element an dom element\n */\nvar _getElementHeight = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('You must provide a valid dom element');\n    }\n    // get calculated style of element\n    var style = window.getComputedStyle(element);\n    // get only height if element has box-sizing: border-box specified\n    if (style.getPropertyValue('box-sizing') === 'border-box') {\n        return parseInt(style.getPropertyValue('height'), 10);\n    }\n    // pick applicable properties, convert to int and reduce by adding\n    return ['height', 'padding-top', 'padding-bottom']\n        .map(function (key) {\n        var int = parseInt(style.getPropertyValue(key), 10);\n        return isNaN(int) ? 0 : int;\n    })\n        .reduce(function (sum, value) { return sum + value; });\n});\n\n/* eslint-env browser */\n/**\n * Get width of an element including padding\n * @param {HTMLElement} element an dom element\n */\nvar _getElementWidth = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('You must provide a valid dom element');\n    }\n    // get calculated style of element\n    var style = window.getComputedStyle(element);\n    // pick applicable properties, convert to int and reduce by adding\n    return ['width', 'padding-left', 'padding-right']\n        .map(function (key) {\n        var int = parseInt(style.getPropertyValue(key), 10);\n        return isNaN(int) ? 0 : int;\n    })\n        .reduce(function (sum, value) { return sum + value; });\n});\n\n/* eslint-env browser */\n/**\n * get handle or return item\n * @param {Array<HTMLElement>} items\n * @param {string} selector\n */\nvar _getHandles = (function (items, selector) {\n    if (!(items instanceof Array)) {\n        throw new Error('You must provide a Array of HTMLElements to be filtered.');\n    }\n    if (typeof selector !== 'string') {\n        return items;\n    }\n    return items\n        // remove items without handle from array\n        .filter(function (item) {\n        return item.querySelector(selector) instanceof HTMLElement ||\n            (item.shadowRoot && item.shadowRoot.querySelector(selector) instanceof HTMLElement);\n    })\n        // replace item with handle in array\n        .map(function (item) {\n        return item.querySelector(selector) || (item.shadowRoot && item.shadowRoot.querySelector(selector));\n    });\n});\n\n/**\n * @param {Event} event\n * @returns {HTMLElement}\n */\nvar getEventTarget = (function (event) {\n    return (event.composedPath && event.composedPath()[0]) || event.target;\n});\n\n/* eslint-env browser */\n/**\n * defaultDragImage returns the current item as dragged image\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {object} elementOffset - an object with the offsets top, left, right & bottom\n * @param {Event} event - the original drag event object\n * @return {object} with element, posX and posY properties\n */\nvar defaultDragImage = function (draggedElement, elementOffset, event) {\n    return {\n        element: draggedElement,\n        posX: event.pageX - elementOffset.left,\n        posY: event.pageY - elementOffset.top\n    };\n};\n/**\n * attaches an element as the drag image to an event\n * @param {Event} event - the original drag event object\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {Function} customDragImage - function to create a custom dragImage\n * @return void\n */\nvar setDragImage = (function (event, draggedElement, customDragImage) {\n    // check if event is provided\n    if (!(event instanceof Event)) {\n        throw new Error('setDragImage requires a DragEvent as the first argument.');\n    }\n    // check if draggedElement is provided\n    if (!(draggedElement instanceof HTMLElement)) {\n        throw new Error('setDragImage requires the dragged element as the second argument.');\n    }\n    // set default function of none provided\n    if (!customDragImage) {\n        customDragImage = defaultDragImage;\n    }\n    // check if setDragImage method is available\n    if (event.dataTransfer && event.dataTransfer.setDragImage) {\n        // get the elements offset\n        var elementOffset = _offset(draggedElement);\n        // get the dragImage\n        var dragImage = customDragImage(draggedElement, elementOffset, event);\n        // check if custom function returns correct values\n        if (!(dragImage.element instanceof HTMLElement) || typeof dragImage.posX !== 'number' || typeof dragImage.posY !== 'number') {\n            throw new Error('The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].');\n        }\n        // needs to be set for HTML5 drag & drop to work\n        event.dataTransfer.effectAllowed = 'copyMove';\n        // Firefox requires it to use the event target's id for the data\n        event.dataTransfer.setData('text/plain', getEventTarget(event).id);\n        // set the drag image on the event\n        event.dataTransfer.setDragImage(dragImage.element, dragImage.posX, dragImage.posY);\n    }\n});\n\n/**\n * Check if curList accepts items from destList\n * @param {sortable} destination the container an item is move to\n * @param {sortable} origin the container an item comes from\n */\nvar _listsConnected = (function (destination, origin) {\n    // check if valid sortable\n    if (destination.isSortable === true) {\n        var acceptFrom = store(destination).getConfig('acceptFrom');\n        // check if acceptFrom is valid\n        if (acceptFrom !== null && acceptFrom !== false && typeof acceptFrom !== 'string') {\n            throw new Error('HTML5Sortable: Wrong argument, \"acceptFrom\" must be \"null\", \"false\", or a valid selector string.');\n        }\n        if (acceptFrom !== null) {\n            return acceptFrom !== false && acceptFrom.split(',').filter(function (sel) {\n                return sel.length > 0 && origin.matches(sel);\n            }).length > 0;\n        }\n        // drop in same list\n        if (destination === origin) {\n            return true;\n        }\n        // check if lists are connected with connectWith\n        if (store(destination).getConfig('connectWith') !== undefined && store(destination).getConfig('connectWith') !== null) {\n            return store(destination).getConfig('connectWith') === store(origin).getConfig('connectWith');\n        }\n    }\n    return false;\n});\n\n/**\n * default configurations\n */\nvar defaultConfiguration = {\n    items: null,\n    // deprecated\n    connectWith: null,\n    // deprecated\n    disableIEFix: null,\n    acceptFrom: null,\n    copy: false,\n    placeholder: null,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging',\n    hoverClass: false,\n    dropTargetContainerClass: false,\n    debounce: 0,\n    throttleTime: 100,\n    maxItems: 0,\n    itemSerializer: undefined,\n    containerSerializer: undefined,\n    customDragImage: null,\n    orientation: 'vertical'\n};\n\n/**\n * make sure a function is only called once within the given amount of time\n * @param {Function} fn the function to throttle\n * @param {number} threshold time limit for throttling\n */\n// must use function to keep this context\nfunction _throttle (fn, threshold) {\n    var _this = this;\n    if (threshold === void 0) { threshold = 250; }\n    // check function\n    if (typeof fn !== 'function') {\n        throw new Error('You must provide a function as the first argument for throttle.');\n    }\n    // check threshold\n    if (typeof threshold !== 'number') {\n        throw new Error('You must provide a number as the second argument for throttle.');\n    }\n    var lastEventTimestamp = null;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var now = Date.now();\n        if (lastEventTimestamp === null || now - lastEventTimestamp >= threshold) {\n            lastEventTimestamp = now;\n            fn.apply(_this, args);\n        }\n    };\n}\n\n/* eslint-env browser */\n/**\n * enable or disable hoverClass on mouseenter/leave if container Items\n * @param {sortable} sortableContainer a valid sortableContainer\n * @param {boolean} enable enable or disable event\n */\n// export default (sortableContainer: sortable, enable: boolean) => {\nvar enableHoverClass = (function (sortableContainer, enable) {\n    if (typeof store(sortableContainer).getConfig('hoverClass') === 'string') {\n        var hoverClasses_1 = store(sortableContainer).getConfig('hoverClass').split(' ');\n        // add class on hover\n        if (enable === true) {\n            addEventListener(sortableContainer, 'mousemove', _throttle(function (event) {\n                // check of no mouse button was pressed when mousemove started == no drag\n                if (event.buttons === 0) {\n                    _filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(function (item) {\n                        var _a, _b;\n                        if (item !== event.target) {\n                            (_a = item.classList).remove.apply(_a, hoverClasses_1);\n                        }\n                        else {\n                            (_b = item.classList).add.apply(_b, hoverClasses_1);\n                        }\n                    });\n                }\n            }, store(sortableContainer).getConfig('throttleTime')));\n            // remove class on leave\n            addEventListener(sortableContainer, 'mouseleave', function () {\n                _filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(function (item) {\n                    var _a;\n                    (_a = item.classList).remove.apply(_a, hoverClasses_1);\n                });\n            });\n            // remove events\n        }\n        else {\n            removeEventListener(sortableContainer, 'mousemove');\n            removeEventListener(sortableContainer, 'mouseleave');\n        }\n    }\n});\n\n/* eslint-env browser */\n/*\n * variables global to the plugin\n */\nvar dragging;\nvar draggingHeight;\nvar draggingWidth;\n/*\n * Keeps track of the initialy selected list, where 'dragstart' event was triggered\n * It allows us to move the data in between individual Sortable List instances\n */\n// Origin List - data from before any item was changed\nvar originContainer;\nvar originIndex;\nvar originElementIndex;\nvar originItemsBeforeUpdate;\n// Previous Sortable Container - we dispatch as sortenter event when a\n// dragged item enters a sortableContainer for the first time\nvar previousContainer;\n// Destination List - data from before any item was changed\nvar destinationItemsBeforeUpdate;\n/**\n * remove event handlers from items\n * @param {Array|NodeList} items\n */\nvar _removeItemEvents = function (items) {\n    removeEventListener(items, 'dragstart');\n    removeEventListener(items, 'dragend');\n    removeEventListener(items, 'dragover');\n    removeEventListener(items, 'dragenter');\n    removeEventListener(items, 'drop');\n    removeEventListener(items, 'mouseenter');\n    removeEventListener(items, 'mouseleave');\n};\n// Remove container events\nvar _removeContainerEvents = function (originContainer, previousContainer) {\n    if (originContainer) {\n        removeEventListener(originContainer, 'dragleave');\n    }\n    if (previousContainer && (previousContainer !== originContainer)) {\n        removeEventListener(previousContainer, 'dragleave');\n    }\n};\n/**\n * _getDragging returns the current element to drag or\n * a copy of the element.\n * Is Copy Active for sortable\n * @param {HTMLElement} draggedItem - the item that the user drags\n * @param {HTMLElement} sortable a single sortable\n */\nvar _getDragging = function (draggedItem, sortable) {\n    var ditem = draggedItem;\n    if (store(sortable).getConfig('copy') === true) {\n        ditem = draggedItem.cloneNode(true);\n        addAttribute(ditem, 'aria-copied', 'true');\n        draggedItem.parentElement.appendChild(ditem);\n        ditem.style.display = 'none';\n        ditem.oldDisplay = draggedItem.style.display;\n    }\n    return ditem;\n};\n/**\n * Remove data from sortable\n * @param {HTMLElement} sortable a single sortable\n */\nvar _removeSortableData = function (sortable) {\n    removeData(sortable);\n    removeAttribute(sortable, 'aria-dropeffect');\n};\n/**\n * Remove data from items\n * @param {Array<HTMLElement>|HTMLElement} items\n */\nvar _removeItemData = function (items) {\n    removeAttribute(items, 'aria-grabbed');\n    removeAttribute(items, 'aria-copied');\n    removeAttribute(items, 'draggable');\n    removeAttribute(items, 'role');\n};\n/**\n * find sortable from element. travels up parent element until found or null.\n * @param {HTMLElement} element a single sortable\n * @param {Event} event - the current event. We need to pass it to be able to\n * find Sortable whith shadowRoot (document fragment has no parent)\n */\nfunction findSortable(element, event) {\n    if (event.composedPath) {\n        return event.composedPath().find(function (el) { return el.isSortable; });\n    }\n    while (element.isSortable !== true) {\n        element = element.parentElement;\n    }\n    return element;\n}\n/**\n * Dragging event is on the sortable element. finds the top child that\n * contains the element.\n * @param {HTMLElement} sortableElement a single sortable\n * @param {HTMLElement} element is that being dragged\n */\nfunction findDragElement(sortableElement, element) {\n    var options = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, options.items);\n    var itemlist = items.filter(function (ele) {\n        return ele.contains(element) || (ele.shadowRoot && ele.shadowRoot.contains(element));\n    });\n    return itemlist.length > 0 ? itemlist[0] : element;\n}\n/**\n * Destroy the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar _destroySortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts') || {};\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    // remove event handlers & data from sortable\n    removeEventListener(sortableElement, 'dragover');\n    removeEventListener(sortableElement, 'dragenter');\n    removeEventListener(sortableElement, 'dragstart');\n    removeEventListener(sortableElement, 'dragend');\n    removeEventListener(sortableElement, 'drop');\n    // remove event data from sortable\n    _removeSortableData(sortableElement);\n    // remove event handlers & data from items\n    removeEventListener(handles, 'mousedown');\n    _removeItemEvents(items);\n    _removeItemData(items);\n    _removeContainerEvents(originContainer, previousContainer);\n    // clear sortable flag\n    sortableElement.isSortable = false;\n};\n/**\n * Enable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar _enableSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    addAttribute(sortableElement, 'aria-dropeffect', 'move');\n    addData(sortableElement, '_disabled', 'false');\n    addAttribute(handles, 'draggable', 'true');\n    // @todo: remove this fix\n    // IE FIX for ghost\n    // can be disabled as it has the side effect that other events\n    // (e.g. click) will be ignored\n    if (opts.disableIEFix === false) {\n        var spanEl = (document || window.document).createElement('span');\n        if (typeof spanEl.dragDrop === 'function') {\n            addEventListener(handles, 'mousedown', function () {\n                if (items.indexOf(this) !== -1) {\n                    this.dragDrop();\n                }\n                else {\n                    var parent = this.parentElement;\n                    while (items.indexOf(parent) === -1) {\n                        parent = parent.parentElement;\n                    }\n                    parent.dragDrop();\n                }\n            });\n        }\n    }\n};\n/**\n * Disable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar _disableSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    addAttribute(sortableElement, 'aria-dropeffect', 'none');\n    addData(sortableElement, '_disabled', 'true');\n    addAttribute(handles, 'draggable', 'false');\n    removeEventListener(handles, 'mousedown');\n};\n/**\n * Reload the sortable\n * @param {HTMLElement} sortableElement a single sortable\n * @description events need to be removed to not be double bound\n */\nvar _reloadSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    addData(sortableElement, '_disabled', 'false');\n    // remove event handlers from items\n    _removeItemEvents(items);\n    _removeContainerEvents(originContainer, previousContainer);\n    removeEventListener(handles, 'mousedown');\n    // remove event handlers from sortable\n    removeEventListener(sortableElement, 'dragover');\n    removeEventListener(sortableElement, 'dragenter');\n    removeEventListener(sortableElement, 'drop');\n};\n/**\n * Public sortable object\n * @param {Array|NodeList} sortableElements\n * @param {object|string} options|method\n */\nfunction sortable(sortableElements, options) {\n    // get method string to see if a method is called\n    var method = String(options);\n    options = options || {};\n    // check if the user provided a selector instead of an element\n    if (typeof sortableElements === 'string') {\n        sortableElements = document.querySelectorAll(sortableElements);\n    }\n    // if the user provided an element, return it in an array to keep the return value consistant\n    if (sortableElements instanceof HTMLElement) {\n        sortableElements = [sortableElements];\n    }\n    sortableElements = Array.prototype.slice.call(sortableElements);\n    if (/serialize/.test(method)) {\n        return sortableElements.map(function (sortableContainer) {\n            var opts = addData(sortableContainer, 'opts');\n            return _serialize(sortableContainer, opts.itemSerializer, opts.containerSerializer);\n        });\n    }\n    sortableElements.forEach(function (sortableElement) {\n        if (/enable|disable|destroy/.test(method)) {\n            return sortable[method](sortableElement);\n        }\n        // log deprecation\n        ['connectWith', 'disableIEFix'].forEach(function (configKey) {\n            if (Object.prototype.hasOwnProperty.call(options, configKey) && options[configKey] !== null) {\n                console.warn(\"HTML5Sortable: You are using the deprecated configuration \\\"\" + configKey + \"\\\". This will be removed in an upcoming version, make sure to migrate to the new options when updating.\");\n            }\n        });\n        // merge options with default options\n        options = Object.assign({}, defaultConfiguration, store(sortableElement).config, options);\n        // init data store for sortable\n        store(sortableElement).config = options;\n        // set options on sortable\n        addData(sortableElement, 'opts', options);\n        // property to define as sortable\n        sortableElement.isSortable = true;\n        // reset sortable\n        _reloadSortable(sortableElement);\n        // initialize\n        var listItems = _filter(sortableElement.children, options.items);\n        // create element if user defined a placeholder element as a string\n        var customPlaceholder;\n        if (options.placeholder !== null && options.placeholder !== undefined) {\n            var tempContainer = document.createElement(sortableElement.tagName);\n            if (options.placeholder instanceof HTMLElement) {\n                tempContainer.appendChild(options.placeholder);\n            }\n            else {\n                tempContainer.innerHTML = options.placeholder;\n            }\n            customPlaceholder = tempContainer.children[0];\n        }\n        // add placeholder\n        store(sortableElement).placeholder = _makePlaceholder(sortableElement, customPlaceholder, options.placeholderClass);\n        addData(sortableElement, 'items', options.items);\n        if (options.acceptFrom) {\n            addData(sortableElement, 'acceptFrom', options.acceptFrom);\n        }\n        else if (options.connectWith) {\n            addData(sortableElement, 'connectWith', options.connectWith);\n        }\n        _enableSortable(sortableElement);\n        addAttribute(listItems, 'role', 'option');\n        addAttribute(listItems, 'aria-grabbed', 'false');\n        // enable hover class\n        enableHoverClass(sortableElement, true);\n        /*\n         Handle drag events on draggable items\n         Handle is set at the sortableElement level as it will bubble up\n         from the item\n         */\n        addEventListener(sortableElement, 'dragstart', function (e) {\n            // ignore dragstart events\n            var target = getEventTarget(e);\n            if (target.isSortable === true) {\n                return;\n            }\n            e.stopImmediatePropagation();\n            if ((options.handle && !target.matches(options.handle)) || target.getAttribute('draggable') === 'false') {\n                return;\n            }\n            var sortableContainer = findSortable(target, e);\n            var dragItem = findDragElement(sortableContainer, target);\n            // grab values\n            originItemsBeforeUpdate = _filter(sortableContainer.children, options.items);\n            originIndex = originItemsBeforeUpdate.indexOf(dragItem);\n            originElementIndex = _index(dragItem, sortableContainer.children);\n            originContainer = sortableContainer;\n            // add transparent clone or other ghost to cursor\n            setDragImage(e, dragItem, options.customDragImage);\n            // cache selsection & add attr for dragging\n            draggingHeight = _getElementHeight(dragItem);\n            draggingWidth = _getElementWidth(dragItem);\n            dragItem.classList.add(options.draggingClass);\n            dragging = _getDragging(dragItem, sortableContainer);\n            addAttribute(dragging, 'aria-grabbed', 'true');\n            // dispatch sortstart event on each element in group\n            sortableContainer.dispatchEvent(new CustomEvent('sortstart', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging,\n                    originalTarget: target\n                }\n            }));\n        });\n        /*\n         We are capturing targetSortable before modifications with 'dragenter' event\n        */\n        addEventListener(sortableElement, 'dragenter', function (e) {\n            var target = getEventTarget(e);\n            var sortableContainer = findSortable(target, e);\n            if (sortableContainer && sortableContainer !== previousContainer) {\n                destinationItemsBeforeUpdate = _filter(sortableContainer.children, addData(sortableContainer, 'items'))\n                    .filter(function (item) { return item !== store(sortableElement).placeholder; });\n                if (options.dropTargetContainerClass) {\n                    sortableContainer.classList.add(options.dropTargetContainerClass);\n                }\n                sortableContainer.dispatchEvent(new CustomEvent('sortenter', {\n                    detail: {\n                        origin: {\n                            elementIndex: originElementIndex,\n                            index: originIndex,\n                            container: originContainer\n                        },\n                        destination: {\n                            container: sortableContainer,\n                            itemsBeforeUpdate: destinationItemsBeforeUpdate\n                        },\n                        item: dragging,\n                        originalTarget: target\n                    }\n                }));\n                addEventListener(sortableContainer, 'dragleave', function (e) {\n                    // TODO: rename outTarget to be more self-explanatory\n                    // e.fromElement for very old browsers, similar to relatedTarget\n                    var outTarget = e.relatedTarget || e.fromElement;\n                    if (!e.currentTarget.contains(outTarget)) {\n                        if (options.dropTargetContainerClass) {\n                            sortableContainer.classList.remove(options.dropTargetContainerClass);\n                        }\n                        sortableContainer.dispatchEvent(new CustomEvent('sortleave', {\n                            detail: {\n                                origin: {\n                                    elementIndex: originElementIndex,\n                                    index: originIndex,\n                                    container: sortableContainer\n                                },\n                                item: dragging,\n                                originalTarget: target\n                            }\n                        }));\n                    }\n                });\n            }\n            previousContainer = sortableContainer;\n        });\n        /*\n         * Dragend Event - https://developer.mozilla.org/en-US/docs/Web/Events/dragend\n         * Fires each time dragEvent end, or ESC pressed\n         * We are using it to clean up any draggable elements and placeholders\n         */\n        addEventListener(sortableElement, 'dragend', function (e) {\n            if (!dragging) {\n                return;\n            }\n            dragging.classList.remove(options.draggingClass);\n            addAttribute(dragging, 'aria-grabbed', 'false');\n            if (dragging.getAttribute('aria-copied') === 'true' && addData(dragging, 'dropped') !== 'true') {\n                dragging.remove();\n            }\n            dragging.style.display = dragging.oldDisplay;\n            delete dragging.oldDisplay;\n            var visiblePlaceholder = Array.from(stores.values()).map(function (data) { return data.placeholder; })\n                .filter(function (placeholder) { return placeholder instanceof HTMLElement; })\n                .filter(isInDom)[0];\n            if (visiblePlaceholder) {\n                visiblePlaceholder.remove();\n            }\n            // dispatch sortstart event on each element in group\n            sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging\n                }\n            }));\n            previousContainer = null;\n            dragging = null;\n            draggingHeight = null;\n            draggingWidth = null;\n        });\n        /*\n         * Drop Event - https://developer.mozilla.org/en-US/docs/Web/Events/drop\n         * Fires when valid drop target area is hit\n         */\n        addEventListener(sortableElement, 'drop', function (e) {\n            if (!_listsConnected(sortableElement, dragging.parentElement)) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            addData(dragging, 'dropped', 'true');\n            // get the one placeholder that is currently visible\n            var visiblePlaceholder = Array.from(stores.values()).map(function (data) {\n                return data.placeholder;\n            })\n                // filter only HTMLElements\n                .filter(function (placeholder) { return placeholder instanceof HTMLElement; })\n                // filter only elements in DOM\n                .filter(isInDom)[0];\n            // attach element after placeholder\n            insertAfter(visiblePlaceholder, dragging);\n            // remove placeholder from dom\n            visiblePlaceholder.remove();\n            /*\n             * Fires Custom Event - 'sortstop'\n             */\n            sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging\n                }\n            }));\n            var placeholder = store(sortableElement).placeholder;\n            var originItems = _filter(originContainer.children, options.items)\n                .filter(function (item) { return item !== placeholder; });\n            var destinationContainer = this.isSortable === true ? this : this.parentElement;\n            var destinationItems = _filter(destinationContainer.children, addData(destinationContainer, 'items'))\n                .filter(function (item) { return item !== placeholder; });\n            var destinationElementIndex = _index(dragging, Array.from(dragging.parentElement.children)\n                .filter(function (item) { return item !== placeholder; }));\n            var destinationIndex = _index(dragging, destinationItems);\n            if (options.dropTargetContainerClass) {\n                destinationContainer.classList.remove(options.dropTargetContainerClass);\n            }\n            /*\n             * When a list item changed container lists or index within a list\n             * Fires Custom Event - 'sortupdate'\n             */\n            if (originElementIndex !== destinationElementIndex || originContainer !== destinationContainer) {\n                sortableElement.dispatchEvent(new CustomEvent('sortupdate', {\n                    detail: {\n                        origin: {\n                            elementIndex: originElementIndex,\n                            index: originIndex,\n                            container: originContainer,\n                            itemsBeforeUpdate: originItemsBeforeUpdate,\n                            items: originItems\n                        },\n                        destination: {\n                            index: destinationIndex,\n                            elementIndex: destinationElementIndex,\n                            container: destinationContainer,\n                            itemsBeforeUpdate: destinationItemsBeforeUpdate,\n                            items: destinationItems\n                        },\n                        item: dragging\n                    }\n                }));\n            }\n        });\n        var debouncedDragOverEnter = _debounce(function (sortableElement, element, pageX, pageY) {\n            if (!dragging) {\n                return;\n            }\n            // set placeholder height if forcePlaceholderSize option is set\n            if (options.forcePlaceholderSize) {\n                store(sortableElement).placeholder.style.height = draggingHeight + 'px';\n                store(sortableElement).placeholder.style.width = draggingWidth + 'px';\n            }\n            // if element the draggedItem is dragged onto is within the array of all elements in list\n            // (not only items, but also disabled, etc.)\n            if (Array.from(sortableElement.children).indexOf(element) > -1) {\n                var thisHeight = _getElementHeight(element);\n                var thisWidth = _getElementWidth(element);\n                var placeholderIndex = _index(store(sortableElement).placeholder, element.parentElement.children);\n                var thisIndex = _index(element, element.parentElement.children);\n                // Check if `element` is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n                if (thisHeight > draggingHeight || thisWidth > draggingWidth) {\n                    // Dead zone?\n                    var deadZoneVertical = thisHeight - draggingHeight;\n                    var deadZoneHorizontal = thisWidth - draggingWidth;\n                    var offsetTop = _offset(element).top;\n                    var offsetLeft = _offset(element).left;\n                    if (placeholderIndex < thisIndex &&\n                        ((options.orientation === 'vertical' && pageY < offsetTop) ||\n                            (options.orientation === 'horizontal' && pageX < offsetLeft))) {\n                        return;\n                    }\n                    if (placeholderIndex > thisIndex &&\n                        ((options.orientation === 'vertical' && pageY > offsetTop + thisHeight - deadZoneVertical) ||\n                            (options.orientation === 'horizontal' && pageX > offsetLeft + thisWidth - deadZoneHorizontal))) {\n                        return;\n                    }\n                }\n                if (dragging.oldDisplay === undefined) {\n                    dragging.oldDisplay = dragging.style.display;\n                }\n                if (dragging.style.display !== 'none') {\n                    dragging.style.display = 'none';\n                }\n                // To avoid flicker, determine where to position the placeholder\n                // based on where the mouse pointer is relative to the elements\n                // vertical center.\n                var placeAfter = false;\n                try {\n                    var elementMiddleVertical = _offset(element).top + element.offsetHeight / 2;\n                    var elementMiddleHorizontal = _offset(element).left + element.offsetWidth / 2;\n                    placeAfter = (options.orientation === 'vertical' && (pageY >= elementMiddleVertical)) ||\n                        (options.orientation === 'horizontal' && (pageX >= elementMiddleHorizontal));\n                }\n                catch (e) {\n                    placeAfter = placeholderIndex < thisIndex;\n                }\n                if (placeAfter) {\n                    insertAfter(element, store(sortableElement).placeholder);\n                }\n                else {\n                    insertBefore(element, store(sortableElement).placeholder);\n                }\n                // get placeholders from all stores & remove all but current one\n                Array.from(stores.values())\n                    // remove empty values\n                    .filter(function (data) { return data.placeholder !== undefined; })\n                    // foreach placeholder in array if outside of current sorableContainer -> remove from DOM\n                    .forEach(function (data) {\n                    if (data.placeholder !== store(sortableElement).placeholder) {\n                        data.placeholder.remove();\n                    }\n                });\n            }\n            else {\n                // get all placeholders from store\n                var placeholders = Array.from(stores.values())\n                    .filter(function (data) { return data.placeholder !== undefined; })\n                    .map(function (data) {\n                    return data.placeholder;\n                });\n                // check if element is not in placeholders\n                if (placeholders.indexOf(element) === -1 && sortableElement === element && !_filter(element.children, options.items).length) {\n                    placeholders.forEach(function (element) { return element.remove(); });\n                    element.appendChild(store(sortableElement).placeholder);\n                }\n            }\n        }, options.debounce);\n        // Handle dragover and dragenter events on draggable items\n        var onDragOverEnter = function (e) {\n            var element = e.target;\n            var sortableElement = element.isSortable === true ? element : findSortable(element, e);\n            element = findDragElement(sortableElement, element);\n            if (!dragging || !_listsConnected(sortableElement, dragging.parentElement) || addData(sortableElement, '_disabled') === 'true') {\n                return;\n            }\n            var options = addData(sortableElement, 'opts');\n            if (parseInt(options.maxItems) && _filter(sortableElement.children, addData(sortableElement, 'items')).length >= parseInt(options.maxItems) && dragging.parentElement !== sortableElement) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            e.dataTransfer.dropEffect = store(sortableElement).getConfig('copy') === true ? 'copy' : 'move';\n            debouncedDragOverEnter(sortableElement, element, e.pageX, e.pageY);\n        };\n        addEventListener(listItems.concat(sortableElement), 'dragover', onDragOverEnter);\n        addEventListener(listItems.concat(sortableElement), 'dragenter', onDragOverEnter);\n    });\n    return sortableElements;\n}\nsortable.destroy = function (sortableElement) {\n    _destroySortable(sortableElement);\n};\nsortable.enable = function (sortableElement) {\n    _enableSortable(sortableElement);\n};\nsortable.disable = function (sortableElement) {\n    _disableSortable(sortableElement);\n};\n/* START.TESTS_ONLY */\nsortable.__testing = {\n    // add internal methods here for testing purposes\n    _data: addData,\n    _removeItemEvents: _removeItemEvents,\n    _removeItemData: _removeItemData,\n    _removeSortableData: _removeSortableData,\n    _removeContainerEvents: _removeContainerEvents\n};\n\nexport default sortable;\n","import sortable from 'html5sortable/dist/html5sortable.es.js';\n\nimport app from 'flarum/admin/app';\nimport icon from 'flarum/common/helpers/icon';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport Button from 'flarum/common/components/Button';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport SelectFieldOptionEditor from './SelectFieldOptionEditor';\n\n/* global m, $ */\n\nexport default class MasqueradePage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.resetNew();\n    this.loading = false;\n    this.existing = [];\n    this.loadExisting();\n    this.enforceProfileCompletion = app.data.settings['masquerade.force-profile-completion'] === '1';\n  }\n\n  config() {\n    sortable(this.element.querySelector('.js-sortable-fields'), {\n      handle: 'legend',\n    })[0].addEventListener('sortupdate', () => {\n      const sorting = this.$('.js-sortable-fields > .Field')\n        .map(function () {\n          return $(this).data('id');\n        })\n        .get();\n\n      this.updateSort(sorting);\n    });\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.config();\n  }\n\n  onupdate() {\n    this.config();\n  }\n\n  content() {\n    return m(\n      '.ExtensionPage-settings.ProfileConfigurePane',\n      m('.container', [\n        m('h2', app.translator.trans('fof-masquerade.admin.general-options')),\n        m(\n          '.Form-group',\n          Switch.component(\n            {\n              state: this.enforceProfileCompletion,\n              onchange: (value) => {\n                const saveValue = value ? '1' : '0';\n                saveSettings({\n                  'masquerade.force-profile-completion': saveValue,\n                });\n                this.enforceProfileCompletion = saveValue;\n              },\n            },\n            app.translator.trans('fof-masquerade.admin.fields.force-user-to-completion')\n          )\n        ),\n        m('h2', app.translator.trans('fof-masquerade.admin.fields.title')),\n        m(\n          'form.js-sortable-fields',\n          this.existing.map((field) => {\n            // Build array of fields to show.\n            return this.addField(field);\n          })\n        ),\n        this.addField(this.new),\n      ])\n    );\n  }\n\n  /**\n   * Creates a field in the DOM.\n   *\n   * @param field\n   * @returns {*}\n   */\n  addField(field) {\n    let exists = field.id();\n\n    return m(\n      'fieldset.Field',\n      {\n        'data-id': field.id(),\n        key: field.id(),\n      },\n      [\n        m('legend', [\n          exists\n            ? [\n                Button.component({\n                  className: 'Button Button--icon Button--danger',\n                  icon: 'fas fa-trash',\n                  onclick: this.deleteField.bind(this, field),\n                }),\n                ' ',\n              ]\n            : null,\n          m(\n            'span.Field-toggle',\n            {\n              onclick: (e) => this.toggleField(e),\n            },\n            [\n              app.translator.trans('fof-masquerade.admin.fields.' + (exists ? 'edit' : 'add'), {\n                field: field.name(),\n              }),\n              ' ',\n              icon('fas fa-caret-down'),\n            ]\n          ),\n        ]),\n        m('.Field-body', [\n          m('.Form-group', [\n            m('label', app.translator.trans('fof-masquerade.admin.fields.name')),\n            m('input.FormControl', {\n              value: field.name(),\n              oninput: withAttr('value', this.updateExistingFieldInput.bind(this, 'name', field)),\n            }),\n            m('span.helpText', app.translator.trans('fof-masquerade.admin.fields.name-help')),\n          ]),\n          m('.Form-group', [\n            m('label', app.translator.trans('fof-masquerade.admin.fields.description')),\n            m('input.FormControl', {\n              value: field.description(),\n              oninput: withAttr('value', this.updateExistingFieldInput.bind(this, 'description', field)),\n            }),\n            m('span.helpText', app.translator.trans('fof-masquerade.admin.fields.description-help')),\n          ]),\n          m('.Form-group', [\n            m('label', app.translator.trans('fof-masquerade.admin.fields.icon')),\n            m('input.FormControl', {\n              value: field.icon(),\n              oninput: withAttr('value', this.updateExistingFieldInput.bind(this, 'icon', field)),\n            }),\n            m(\n              'span.helpText',\n              app.translator.trans('fof-masquerade.admin.fields.icon-help', {\n                a: <a href=\"https://fontawesome.com/icons?m=free\" target=\"_blank\" />,\n              })\n            ),\n          ]),\n          m(\n            '.Form-group',\n            Switch.component(\n              {\n                state: field.on_bio(),\n                onchange: this.updateExistingFieldInput.bind(this, 'on_bio', field),\n              },\n              app.translator.trans('fof-masquerade.admin.fields.on_bio')\n            )\n          ),\n          m(\n            '.Form-group',\n            Switch.component(\n              {\n                state: field.required(),\n                onchange: this.updateExistingFieldInput.bind(this, 'required', field),\n              },\n              app.translator.trans('fof-masquerade.admin.fields.required')\n            )\n          ),\n          m('.Form-group', [\n            m('label', app.translator.trans('fof-masquerade.admin.fields.type')),\n            Select.component({\n              onchange: (value) => {\n                if (value === 'null') {\n                  value = null;\n                }\n\n                this.updateExistingFieldInput('type', field, value);\n              },\n              options: this.availableTypes(),\n              value: field.type(),\n            }),\n          ]),\n          field.type() === 'select'\n            ? SelectFieldOptionEditor.component({\n                onchange: (value) => {\n                  this.updateExistingFieldInput('validation', field, value);\n                },\n                value: field.validation(),\n              })\n            : null,\n          field.type() === null\n            ? m('.Form-group', [\n                m('label', app.translator.trans('fof-masquerade.admin.fields.validation')),\n                m('input.FormControl', {\n                  value: field.validation(),\n                  oninput: withAttr('value', this.updateExistingFieldInput.bind(this, 'validation', field)),\n                }),\n                m(\n                  'span.helpText',\n                  app.translator.trans('fof-masquerade.admin.fields.validation-help', {\n                    a: <a href=\"https://laravel.com/docs/5.2/validation#available-validation-rules\" target=\"_blank\" />,\n                  })\n                ),\n              ])\n            : null,\n          m(\n            '.Form-group',\n            m('.ButtonGroup', [\n              Button.component(\n                {\n                  className: 'Button Button--primary',\n                  loading: this.loading,\n                  disabled: !this.readyToAdd(field),\n                  onclick: exists ? this.updateExistingField.bind(this, field) : this.submitAddField.bind(this),\n                },\n                app.translator.trans('fof-masquerade.admin.buttons.' + (exists ? 'edit' : 'add') + '-field')\n              ),\n              exists\n                ? Button.component(\n                    {\n                      className: 'Button Button--danger',\n                      loading: this.loading,\n                      onclick: this.deleteField.bind(this, field),\n                    },\n                    app.translator.trans('fof-masquerade.admin.buttons.delete-field')\n                  )\n                : null,\n            ])\n          ),\n        ]),\n      ]\n    );\n  }\n\n  updateExistingFieldInput(what, field, value) {\n    field.pushAttributes({\n      [what]: value,\n    });\n  }\n\n  /**\n   * Sorts the fields.\n   *\n   * @param {Array} sorting\n   */\n  updateSort(sorting) {\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/masquerade/fields/order',\n        body: {\n          sort: sorting,\n        },\n      })\n      .then(this.requestSuccess.bind(this));\n  }\n\n  /**\n   * Opens and closes field configuration sets.\n   *\n   * @param e\n   */\n  toggleField(e) {\n    $(e.target).parents('.Field').toggleClass('active');\n  }\n\n  /**\n   * Deletes a field configuration set.\n   *\n   * @param field\n   */\n  deleteField(field) {\n    field.delete().then(this.requestSuccess.bind(this));\n  }\n\n  /**\n   * Saves the settings to the database and redraw the page\n   *\n   * @param e\n   */\n  submitAddField(e) {\n    e.preventDefault();\n\n    this.new\n      .save(this.new.data.attributes)\n      .then(this.requestSuccess.bind(this))\n      .then(() => {\n        this.resetNew();\n      });\n\n    m.redraw();\n  }\n\n  /**\n   * Updates the value of one field.\n   *\n   * @param field\n   */\n  updateExistingField(field) {\n    if (!field.id()) return;\n\n    field.save(field.data.attributes).then(this.requestSuccess.bind(this));\n  }\n\n  /**\n   * Parses result to update DOM.\n   */\n  requestSuccess() {\n    this.existing = app.store.all('masquerade-field');\n\n    // Update order in case the store order doesn't reflect the true ordering\n    this.existing.sort((a, b) => {\n      if (a.sort() < b.sort()) return -1;\n      if (a.sort() > b.sort()) return 1;\n      return 0;\n    });\n\n    this.loading = false;\n    m.redraw();\n  }\n\n  /**\n   * Retrieves list of fields.\n   */\n  loadExisting() {\n    this.loading = true;\n\n    return app\n      .request({\n        method: 'GET',\n        url: app.forum.attribute('apiUrl') + '/masquerade/fields',\n      })\n      .then((result) => {\n        app.store.pushPayload(result);\n\n        this.requestSuccess();\n      });\n  }\n\n  /**\n   * Resets the new field.\n   */\n  resetNew() {\n    this.new = app.store.createRecord('masquerade-field', {\n      attributes: {\n        name: '',\n        description: '',\n        prefix: '',\n        icon: '',\n        required: false,\n        on_bio: false,\n        type: null,\n        validation: '',\n      },\n    });\n  }\n\n  /**\n   * Checks whether creation field is completed.\n   *\n   * @returns boolean\n   */\n  readyToAdd(field) {\n    if (field.name()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * List of field types availables\n   * @returns {Array}\n   */\n  availableTypes() {\n    return {\n      url: app.translator.trans('fof-masquerade.admin.types.url'),\n      email: app.translator.trans('fof-masquerade.admin.types.email'),\n      boolean: app.translator.trans('fof-masquerade.admin.types.boolean'),\n      select: app.translator.trans('fof-masquerade.admin.types.select'),\n      null: app.translator.trans('fof-masquerade.admin.types.advanced'),\n    };\n  }\n}\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\n\n/* global m */\n\nexport default class SelectFieldOptionEditor extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.newOption = '';\n  }\n\n  view() {\n    return m('.Form-group', [\n      m('label', app.translator.trans('fof-masquerade.admin.fields.options')),\n      m(\n        'table',\n        m(\n          'tbody',\n          this.options().map((option, optionIndex) =>\n            m('tr', [\n              m(\n                'td',\n                m('input[type=text].FormControl', {\n                  oninput: (event) => {\n                    this.updateOption(optionIndex, event.target.value);\n                  },\n                  value: option,\n                })\n              ),\n              m(\n                'td',\n                m(\n                  'button.Button',\n                  {\n                    onclick: () => {\n                      this.moveOption(optionIndex, -1);\n                    },\n                  },\n                  icon('fas fa-chevron-up')\n                )\n              ),\n              m(\n                'td',\n                m(\n                  'button.Button',\n                  {\n                    onclick: () => {\n                      this.moveOption(optionIndex, 1);\n                    },\n                  },\n                  icon('fas fa-chevron-down')\n                )\n              ),\n              m(\n                'td',\n                m(\n                  'button.Button.Button--danger',\n                  {\n                    onclick: () => {\n                      this.deleteOption(optionIndex);\n                    },\n                  },\n                  icon('fas fa-times')\n                )\n              ),\n            ])\n          )\n        )\n      ),\n      m('.helpText', app.translator.trans('fof-masquerade.admin.fields.option-comma-warning')),\n      m(\n        'table',\n        m('tbody'),\n        m('tr', [\n          m(\n            'td',\n            m('input[type=text].FormControl', {\n              onchange: (event) => {\n                this.newOption = event.target.value;\n              },\n              value: this.newOption,\n              placeholder: app.translator.trans('fof-masquerade.admin.fields.option-new'),\n            })\n          ),\n          m(\n            'td',\n            m(\n              'button.Button.Button--primary',\n              {\n                onclick: () => {\n                  this.addOption();\n                },\n              },\n              icon('fas fa-plus')\n            )\n          ),\n        ])\n      ),\n    ]);\n  }\n\n  updateRules(options) {\n    // We ignore other existing rules, they would probably be leftovers from another field type when changing types\n    this.attrs.onchange('in:' + options.join(','));\n  }\n\n  options() {\n    const rules = this.attrs.value.split('|');\n\n    let options = [];\n\n    rules.forEach((rule) => {\n      const parts = rule.split(':', 2);\n\n      if (parts[0] === 'in') {\n        options = parts[1].split(',');\n      }\n    });\n\n    return options;\n  }\n\n  updateOption(index, value) {\n    let options = this.options();\n\n    options[index] = value;\n\n    this.updateRules(options);\n  }\n\n  moveOption(index, moveIndex) {\n    let options = this.options();\n\n    const newIndex = index + moveIndex;\n\n    if (newIndex < 0 || newIndex > options.length - 1) {\n      return;\n    }\n\n    const move = options.splice(index, 1);\n\n    options.splice(newIndex, 0, move[0]);\n\n    this.updateRules(options);\n  }\n\n  deleteOption(index) {\n    let options = this.options();\n\n    options.splice(index, 1);\n\n    this.updateRules(options);\n  }\n\n  addOption() {\n    if (this.newOption === '') {\n      return;\n    }\n\n    let options = this.options();\n\n    options.push(this.newOption);\n\n    this.newOption = '';\n\n    this.updateRules(options);\n  }\n}\n","import app from 'flarum/admin/app';\nimport Field from './../lib/models/Field';\nimport MasqueradePage from './components/MasqueradePage';\n\napp.initializers.add('fof-masquerade', () => {\n  app.store.models['masquerade-field'] = Field;\n\n  app.extensionData\n    .for('fof-masquerade')\n    .registerPage(MasqueradePage)\n    .registerPermission(\n      {\n        icon: 'far fa-id-card',\n        label: app.translator.trans('fof-masquerade.admin.permissions.view-profile'),\n        permission: 'fof.masquerade.view-profile',\n        allowGuest: true,\n      },\n      'view'\n    )\n    .registerPermission(\n      {\n        icon: 'far fa-id-card',\n        label: app.translator.trans('fof-masquerade.admin.permissions.have-profile'),\n        permission: 'fof.masquerade.have-profile',\n      },\n      'start'\n    )\n    .registerPermission(\n      {\n        icon: 'far fa-id-card',\n        label: app.translator.trans('fof-masquerade.admin.permissions.edit-others-profile'),\n        permission: 'fof.masquerade.edit-others-profile',\n      },\n      'moderate'\n    );\n});\n","import Model from 'flarum/common/Model';\n\nexport default class Field extends Model {\n  name = Model.attribute('name');\n  description = Model.attribute('description');\n  type = Model.attribute('type');\n  validation = Model.attribute('validation');\n  required = Model.attribute('required');\n  prefix = Model.attribute('prefix');\n  icon = Model.attribute('icon');\n  sort = Model.attribute('sort');\n  deleted_at = Model.attribute('deleted_at', Model.transformDate);\n  answer = Model.hasOne('answer');\n  on_bio = Model.attribute('on_bio');\n\n  apiEndpoint() {\n    return '/masquerade/fields' + (this.exists ? '/' + this.data.id : '');\n  }\n}\n","module.exports = flarum.core.compat['admin/app'];","module.exports = flarum.core.compat['admin/components/ExtensionPage'];","module.exports = flarum.core.compat['admin/utils/saveSettings'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/utils/withAttr'];"],"sourceRoot":""}